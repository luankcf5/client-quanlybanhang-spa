(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3950,6237,5017,5332,5479],{84234:function(e,n,l){Promise.resolve().then(l.bind(l,79670))},3347:function(e,n,l){"use strict";l.d(n,{fA:function(){return s},ul:function(){return o},wT:function(){return u}});var t=l(42333),a=l(2265),r=l(92580);let i=r.Hv.role.root,d={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function u(){let{data:e,isLoading:n,error:l,isValidating:u}=(0,t.ZP)(i,r._i,d);return(0,a.useMemo)(()=>({roles:e||[],rolesLoading:n,rolesError:l,rolesValidating:u,rolesEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.roles,l,n,u])}async function s(e){let{data:n}=await r.ZP.post(i,e);return n}async function o(e,n){let{data:l}=await r.ZP.patch("".concat(i,"/").concat(e),n);return l}},79670:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return E}});var t=l(57437),a=l(2265),r=l(99149),i=l(3347),d=l(84693),u=l(20501),s=l(35691),o=l(61865),c=l(89701),h=l(13457),m=l(76623),f=l(22079),p=l(64494),v=l(137),_=l(91797),g=l(42834),x=l(26337),y=l(42333),b=l(92580);let j=b.Hv.permission.root,q={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};var w=l(8653),Z=l(27558);function C(){let{table_selected_row:e,table_open_form:n,setValue:l,onForm:r,onCreateNewRow:d,onUpdateRow:C}=(0,u.S)(),{permissions:N}=function(){let{data:e,isLoading:n,error:l,isValidating:t}=(0,y.ZP)(j,b._i,q);return(0,a.useMemo)(()=>({permissions:e||[],permissionsLoading:n,permissionsError:l,permissionsValidating:t,permissionsEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.permissions,l,n,t])}(),A=!!e,{enqueueSnackbar:E}=(0,w.Ds)(),M=s.Ry().shape({name:s.Z_().required("Bạn chưa nhập t\xean cho quyền hạn !"),slug:s.Z_().required("Bạn chưa nhập m\xe3 cho quyền hạn")}),T=(0,a.useMemo)(()=>({name:(null==e?void 0:e.name)||"",slug:(null==e?void 0:e.slug)||""}),[e]),k=(0,o.cI)({resolver:(0,c.X)(M),defaultValues:T}),{reset:O,handleSubmit:P,formState:{isSubmitting:S}}=k;(0,a.useEffect)(()=>{O(T)},[O,e,T]);let W=P(async n=>{try{if(A){let l=await (0,i.ul)(e.id,n);C(l),E("Đ\xe3 cập nhật dữ liệu quyền hạn !")}else{let e=await (0,i.fA)(n);d(e),E("Đ\xe3 th\xeam dữ liệu quyền hạn mới !")}O(),I()}catch(e){console.log(e),E(e.message[0]||e.message||"Đ\xe3 c\xf3 lỗi xảy ra !  Vui l\xf2ng thử lại !",{variant:"error"})}}),I=(0,a.useCallback)(()=>{l("table_selected_row",null),r(!1),O()},[r,l,O]);return(0,t.jsx)(f.Z,{fullWidth:!0,maxWidth:"sm",open:n,onClose:I,children:(0,t.jsxs)(Z.ZP,{methods:k,onSubmit:W,children:[(0,t.jsx)(_.Z,{children:A?"Cập nhật dữ liệu quyền hạn":"Th\xeam dữ liệu quyền hạn mới"}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)(h.Z,{spacing:2,children:[(0,t.jsx)(Z.jY,{label:"T\xean quyền hạn :",required:!0,children:(0,t.jsx)(Z.au,{name:"name",label:"Nhập t\xean quyền hạn",placeholder:"Nh\xe2n vi\xean thu ng\xe2n..."})}),(0,t.jsx)(Z.jY,{label:"M\xe3 quyền hạn :",required:!0,children:(0,t.jsx)(Z.au,{name:"slug",label:"Nhập m\xe3 quyền hạn...",placeholder:"thu-ngan..."})}),(0,t.jsx)(Z.jY,{label:"Quyền hạn nh\xe2n vi\xean :",required:!0,children:(0,t.jsx)(Z.Cc,{name:"roleId",label:"Chọn quyền hạn cho nh\xe2n vi\xean",children:N.map(e=>(0,t.jsx)(p.Z,{value:e.id,children:e.name},e.id))})})]})}),(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(m.Z,{variant:"outlined",onClick:I,children:"Huỷ bỏ"}),(0,t.jsx)(v.Z,{type:"submit",color:"primary",variant:"contained",loading:S,children:A?"Cập nhật dữ liệu":"Th\xeam dữ liệu mới"})]})]})})}var N=l(41689);let A=[{field:"id",headerName:"Id",filterable:!1},{field:"name",headerName:"T\xean quyền hạn",flex:1,minWidth:270,hideable:!1,renderCell:e=>e.row.name},{field:"slug",headerName:"M\xe3 quyền hạn",flex:1,minWidth:270,renderCell:e=>e.row.slug},{type:"date",field:"createdAt",headerName:"Thời gian tạo",headerAlign:"center",align:"center",filterable:!1,flex:1,minWidth:200,valueFormatter:e=>(0,N.Mu)(e.value.createdAt),renderCell:e=>(0,N.zM)(e.row.createdAt)},{type:"date",field:"updatedAt",headerName:"Cập nhật gần nhất",headerAlign:"center",align:"center",filterable:!1,flex:1,minWidth:200,valueFormatter:e=>(0,N.Mu)(e.value.updatedAt),renderCell:e=>(0,N.zM)(e.row.updatedAt)}];function E(){let{roles:e}=(0,i.wT)(),{setValues:n}=(0,u.S)();return(0,a.useEffect)(()=>{n({table_data:e,table_column:A,table_selected:[],table_export_data:e.map(e=>({id:e.id,"T\xean quyền hạn":e.name})),table_config:{table_name:"roles",add_data:!0,add_multi_data:!1,export_data:!0,selected_data:!0,delete_multi:!0,change_status_multi:!1,active_row:!1,edit_row:!0,delete_row:!0}})},[e]),(0,t.jsxs)(d.jx,{hasContent:!0,roles:["teacher"],children:[(0,t.jsx)(r.Z,{}),(0,t.jsx)(C,{})]})}}},function(e){e.O(0,[1425,2771,1396,4549,7212,6672,1923,7133,38,8324,1597,7709,2290,5243,9321,3864,7041,3840,2971,4938,1744],function(){return e(e.s=84234)}),_N_E=e.O()}]);