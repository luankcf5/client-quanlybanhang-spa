(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7879,6237,5017,5332,5479],{48589:function(e,t,r){Promise.resolve().then(r.bind(r,79399))},3347:function(e,t,r){"use strict";r.d(t,{fA:function(){return h},ul:function(){return c},wT:function(){return s}});var n=r(42333),i=r(2265),a=r(92580);let o=a.Hv.role.root,l={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function s(){let{data:e,isLoading:t,error:r,isValidating:s}=(0,n.ZP)(o,a._i,l);return(0,i.useMemo)(()=>({roles:e||[],rolesLoading:t,rolesError:r,rolesValidating:s,rolesEmpty:!t&&!(null==e?void 0:e.length)}),[null==e?void 0:e.roles,r,t,s])}async function h(e){let{data:t}=await a.ZP.post(o,e);return t}async function c(e,t){let{data:r}=await a.ZP.patch("".concat(o,"/").concat(e),t);return r}},64060:function(e,t,r){"use strict";r.d(t,{Z:function(){return c},S:function(){return u}});var n=r(57437),i=r(60443),a=r(59500),o=r(35843),l=r(89975),s=r(69112);let h=(0,o.ZP)("span")(e=>{let{arrow:t,theme:r}=e,n={top:-6.5,transform:"rotate(135deg)"},i={bottom:-6.5,transform:"rotate(-45deg)"},a={left:-6.5,transform:"rotate(45deg)"},o={right:-6.5,transform:"rotate(-135deg)"};return{width:14,height:14,position:"absolute",borderBottomLeftRadius:3.5,clipPath:"polygon(0% 0%, 100% 100%, 0% 100%)",border:"solid 1px ".concat((0,l.Fq)("light"===r.palette.mode?r.palette.grey[500]:r.palette.common.black,.12)),...(0,s.Ls)({color:r.palette.background.paper}),..."top-left"===t&&{...n,left:20},..."top-center"===t&&{...n,left:0,right:0,margin:"auto"},..."top-right"===t&&{...n,right:20},..."bottom-left"===t&&{...i,left:20},..."bottom-center"===t&&{...i,left:0,right:0,margin:"auto"},..."bottom-right"===t&&{...i,right:20},..."left-top"===t&&{...a,top:20},..."left-center"===t&&{...a,top:0,bottom:0,margin:"auto"},..."left-bottom"===t&&{...a,bottom:20},..."right-top"===t&&{...o,top:20},..."right-center"===t&&{...o,top:0,bottom:0,margin:"auto"},..."right-bottom"===t&&{...o,bottom:20}}});function c(e){let{open:t,children:r,arrow:o="top-right",hiddenArrow:l,sx:s,...c}=e,{style:d,anchorOrigin:u,transformOrigin:m}=function(e){let t;switch(e){case"top-left":t={style:{ml:-.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"top-center":t={style:{},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}};break;case"top-right":default:t={style:{ml:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"bottom-left":t={style:{ml:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"bottom-center":t={style:{},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}};break;case"bottom-right":t={style:{ml:.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}};break;case"left-top":t={style:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"left-center":t={anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}};break;case"left-bottom":t={style:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"right-top":t={style:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"right-center":t={anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"}};break;case"right-bottom":t={style:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"}}}return t}(o);return(0,n.jsxs)(a.ZP,{open:!!t,anchorEl:t,anchorOrigin:u,transformOrigin:m,slotProps:{paper:{sx:{width:"auto",overflow:"inherit",...d,["& .".concat(i.Z.root)]:{"& svg":{mr:2,flexShrink:0}},...s}}},...c,children:[!l&&(0,n.jsx)(h,{arrow:o}),r]})}var d=r(2265);function u(){let[e,t]=(0,d.useState)(null);return{open:e,onOpen:(0,d.useCallback)(e=>{t(e.currentTarget)},[]),onClose:(0,d.useCallback)(()=>{t(null)},[]),setOpen:t}}},79399:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var n=r(57437),i=r(2265),a=r(99149),o=r(42333),l=r(92580);let s=l.Hv.user.root,h={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};async function c(e){let{data:t}=await l.ZP.post(s,e);return t}async function d(e,t){let{data:r}=await l.ZP.patch("".concat(s,"/").concat(e),t);return r}var u=r(84693),m=r(20501),g=r(35691),f=r(61865),p=r(4309),v=r(89701),b=r(13457),x=r(76623),j=r(22079),w=r(78276),O=r(64494),_=r(46776),y=r(137),k=r(91797),Z=r(42834),z=r(26337),C=r(81679),I=r(3347),N=r(27680),T=r(8653),q=r(64060),P=r(27558);function A(){let{table_selected_row:e,table_open_form:t,setValue:r,onForm:a,onCreateNewRow:o,onUpdateRow:l}=(0,m.S)(),{roles:s}=(0,I.wT)(),h=!!e,{enqueueSnackbar:u}=(0,T.Ds)(),A=(0,p.generate)({length:10,numbers:!0,symbols:!0,lowercase:!0,uppercase:!0}),S=g.Ry().shape({username:g.Z_().required("Bạn chưa nhập t\xean đăng nhập nh\xe2n vi\xean !").min(8,"T\xean đăng nhập phải từ 8 k\xed tự trở l\xean !"),password:g.Z_().required("Bạn chưa nhập mật khẩu cho nh\xe2n vi\xean !").min(8,"Mật khẩu phải từ 8 k\xed tự trở l\xean !"),name:g.Z_().required("Bạn chưa nhập họ t\xean cho nh\xe2n vi\xean !").min(8,"Họ v\xe0 t\xean phải từ 8 k\xed tự trở l\xean !"),statusId:g.O7().required("Bạn chưa x\xe1c định t\xecnh trạng nh\xe2n vi\xean !"),roleId:g.Z_().required("Bạn chưa chọn quyền hạn cho nh\xe2n vi\xean !")}),E=(0,i.useMemo)(()=>{var t;return{username:(null==e?void 0:e.username)||"",password:(null==e?void 0:e.password)||"",name:(null==e?void 0:e.name)||"",statusId:(null==e?void 0:e.statusId)||!0,roleId:(null==e?void 0:null===(t=e.roles[0])||void 0===t?void 0:t.id)||""}},[e]),M=(0,f.cI)({resolver:(0,v.X)(S),defaultValues:E}),{reset:W,setValue:B,handleSubmit:L,formState:{isSubmitting:F}}=M;(0,i.useEffect)(()=>{W(E)},[W,e,E]);let H=(0,q.S)(),V=L(async t=>{try{if(h){let r=await d(e.id,{...t,statusId:t.statusId?1:2,roleIds:[Number(t.roleId)]});l(r),u("Đ\xe3 cập nhật dữ liệu nh\xe2n vi\xean !")}else{let e=await c({...t,statusId:t.statusId?1:2,roleIds:[Number(t.roleId)]});o(e),u("Đ\xe3 th\xeam dữ liệu nh\xe2n vi\xean mới !")}W(),Y()}catch(e){console.log(e),u(e.message||e.message[0]||"Đ\xe3 c\xf3 lỗi xảy ra !  Vui l\xf2ng thử lại !",{variant:"error"})}}),Y=(0,i.useCallback)(()=>{r("table_selected_row",null),a(!1),W(),H.onClose()},[a,r,W,H]);return(0,n.jsx)(j.Z,{fullWidth:!0,maxWidth:"sm",open:t,onClose:Y,children:(0,n.jsxs)(P.ZP,{methods:M,onSubmit:V,children:[(0,n.jsx)(k.Z,{children:h?"Cập nhật dữ liệu nh\xe2n vi\xean":"Th\xeam dữ liệu nh\xe2n vi\xean mới"}),(0,n.jsx)(z.Z,{children:(0,n.jsxs)(b.Z,{spacing:2,children:[!h&&(0,n.jsxs)(b.Z,{direction:"row",spacing:2,children:[(0,n.jsx)(P.jY,{label:"T\xean đăng nhập nh\xe2n vi\xean :",required:!0,children:(0,n.jsx)(P.au,{name:"username",label:"lethanhtung..."})}),(0,n.jsx)(P.jY,{label:"Mật khẩu đăng nhập :",required:!0,children:(0,n.jsx)(P.au,{name:"password",placeholder:"TungLe@123456...",InputProps:{endAdornment:(0,n.jsx)(C.Z,{position:"start",children:(0,n.jsx)(w.Z,{title:"Mật khẩu ngẫu nhi\xean",children:(0,n.jsx)(_.Z,{edge:"end",color:"primary",onClick:()=>B("password",A,{shouldValidate:!0}),children:(0,n.jsx)(N.Z,{icon:"game-icons:perspective-dice-six-faces-random"})})})})}})})]}),(0,n.jsx)(P.jY,{label:"Họ v\xe0 t\xean nh\xe2n vi\xean :",required:!0,children:(0,n.jsx)(P.au,{name:"name",placeholder:"L\xea Thanh T\xf9ng..."})}),(0,n.jsx)(P.jY,{label:"Quyền hạn nh\xe2n vi\xean :",required:!0,children:(0,n.jsx)(P.Cc,{name:"roleId",label:"Chọn quyền hạn cho nh\xe2n vi\xean",children:s.map(e=>(0,n.jsx)(O.Z,{value:e.id,children:e.name},e.id))})}),(0,n.jsx)(P.jY,{label:"T\xecnh trạng nh\xe2n vi\xean :",required:!0,children:(0,n.jsx)(P._e,{name:"statusId",label:"Cho ph\xe9p nh\xe2n vi\xean hoạt động"})})]})}),(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(x.Z,{variant:"outlined",onClick:Y,children:"Huỷ bỏ"}),(0,n.jsx)(y.Z,{type:"submit",color:"primary",variant:"contained",loading:F,children:h?"Cập nhật dữ liệu":"Th\xeam dữ liệu mới"})]})]})})}let S=e=>e.map(e=>({...e}));var E=r(41689),M=r(97203);let W=[{field:"id",headerName:"Id",filterable:!1},{field:"name",headerName:"T\xean nh\xe2n vi\xean",flex:1,minWidth:270,hideable:!1,renderCell:e=>e.row.name},{field:"username",headerName:"T\xean t\xe0i khoản",flex:1,minWidth:180,renderCell:e=>e.row.username},{field:"gender",headerName:"Giới t\xednh",flex:1,minWidth:180,renderCell:e=>1===e.row.gender.id?"Nam":"Nữ"},{field:"phone",headerName:"Số li\xean hệ",flex:1,minWidth:180,renderCell:e=>e.row.phone},{field:"roles",headerName:"Quyền hạn",flex:1,minWidth:180,renderCell:e=>{var t;return null===(t=e.row.roles[0])||void 0===t?void 0:t.name}},{field:"statusId",headerName:"Trạng th\xe1i",headerAlign:"center",align:"center",hideable:!1,filterable:!1,flex:1,minWidth:160,renderCell:e=>(0,n.jsx)(M.Z,{variant:"soft",color:1===e.row.statusId?"success":"warning",children:1===e.row.statusId?"Đang hoạt động":"Đ\xe3 v\xf4 hiệu ho\xe1"})},{type:"date",field:"createdAt",headerName:"Thời gian tạo",headerAlign:"center",align:"center",filterable:!1,flex:1,minWidth:200,valueFormatter:e=>(0,E.Mu)(e.value.createdAt),renderCell:e=>(0,E.zM)(e.row.createdAt)},{type:"date",field:"updatedAt",headerName:"Cập nhật gần nhất",headerAlign:"center",align:"center",filterable:!1,flex:1,minWidth:200,valueFormatter:e=>(0,E.Mu)(e.value.updatedAt),renderCell:e=>(0,E.zM)(e.row.updatedAt)}];function B(){let{users:e}=function(){let{data:e,isLoading:t,error:r,isValidating:n}=(0,o.ZP)(s,l._i,h);return(0,i.useMemo)(()=>({users:e||[],usersLoading:t,usersError:r,usersValidating:n,usersEmpty:!t&&!(null==e?void 0:e.length)}),[null==e?void 0:e.users,r,t,n])}(),{setValues:t}=(0,m.S)();return(0,i.useEffect)(()=>{t({table_data:S(e),table_column:W,table_selected:[],table_export_data:e.map(e=>({id:e.id,"T\xean đăng nhập":e.username})),table_config:{table_name:"users",add_data:!0,add_multi_data:!1,export_data:!0,selected_data:!0,delete_multi:!1,change_status_multi:!0,active_row:!0,edit_row:!0,delete_row:!1}})},[e]),(0,n.jsxs)(u.jx,{hasContent:!0,roles:["teacher"],children:[(0,n.jsx)(a.Z,{}),(0,n.jsx)(A,{})]})}}},function(e){e.O(0,[1425,8218,2771,1396,4549,7212,6672,1923,7133,38,8324,1597,7709,2925,2290,5243,9321,3864,7041,3840,2971,4938,1744],function(){return e(e.s=48589)}),_N_E=e.O()}]);