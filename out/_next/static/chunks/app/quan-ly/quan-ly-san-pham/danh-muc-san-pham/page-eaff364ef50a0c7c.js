(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2819,6237,5017,5479,5332],{51573:function(e,t,a){Promise.resolve().then(a.bind(a,52828))},73318:function(e,t,a){"use strict";a.d(t,{Py:function(){return c},k4:function(){return o},yr:function(){return s}});var n=a(42333),i=a(2265),r=a(92580);let l=r.Hv.category.root,d={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function c(){let{data:e,isLoading:t,error:a,isValidating:c}=(0,n.ZP)(l,r._i,d);return(0,i.useMemo)(()=>({categories:e||[],categoriesLoading:t,categoriesError:a,categoriesValidating:c,categoriesEmpty:!t&&!(null==e?void 0:e.length)}),[null==e?void 0:e.categories,a,t,c])}async function o(e){let{data:t}=await r.ZP.post(l,e);return t}async function s(e,t){let{data:a}=await r.ZP.patch("".concat(l,"/").concat(e),t);return a}},52828:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var n=a(57437),i=a(2265),r=a(99149),l=a(84693),d=a(20501),c=a(73318),o=a(35691),s=a(61865),u=a(89701),h=a(13457),m=a(76623),f=a(22079),p=a(137),g=a(91797),_=a(42834),x=a(26337),b=a(8653),v=a(27558);function j(){let{table_selected_row:e,table_open_form:t,setValue:a,onForm:r,onCreateNewRow:l,onUpdateRow:j}=(0,d.S)(),y=!!e,{enqueueSnackbar:w}=(0,b.Ds)(),Z=o.Ry().shape({name:o.Z_().required("Bạn chưa nhập t\xean cho danh mục !"),description:o.Z_().required("Bạn chưa nhập m\xf4 tả cho danh mục")}),C=(0,i.useMemo)(()=>({name:(null==e?void 0:e.name)||"",description:(null==e?void 0:e.description)||""}),[e]),N=(0,s.cI)({resolver:(0,u.X)(Z),defaultValues:C}),{reset:k,handleSubmit:A,formState:{isSubmitting:M}}=N;(0,i.useEffect)(()=>{k(C)},[k,e,C]);let E=A(async t=>{try{if(y){let a=await (0,c.yr)(e.id,{...t,tags:[]});j(a),w("Đ\xe3 cập nhật dữ liệu danh mục !")}else{let e=await (0,c.k4)({...t,tags:[]});l(e),w("Đ\xe3 th\xeam dữ liệu danh mục mới !")}k(),P()}catch(e){console.log(e),w(e.message[0]||e.message||"Đ\xe3 c\xf3 lỗi xảy ra !  Vui l\xf2ng thử lại !",{variant:"error"})}}),P=(0,i.useCallback)(()=>{a("table_selected_row",null),r(!1),k()},[r,a,k]);return(0,n.jsx)(f.Z,{fullWidth:!0,maxWidth:"sm",open:t,onClose:P,children:(0,n.jsxs)(v.ZP,{methods:N,onSubmit:E,children:[(0,n.jsx)(g.Z,{children:y?"Cập nhật dữ liệu danh mục":"Th\xeam dữ liệu danh mục mới"}),(0,n.jsx)(x.Z,{children:(0,n.jsxs)(h.Z,{spacing:2,children:[(0,n.jsx)(v.jY,{label:"T\xean danh mục :",required:!0,children:(0,n.jsx)(v.au,{name:"name",label:"Nhập t\xean danh mục",placeholder:"Đồ gia dụng..."})}),(0,n.jsx)(v.jY,{label:"M\xf4 tả danh mục :",required:!0,children:(0,n.jsx)(v.au,{multiline:!0,rows:4,name:"description",label:"Nhập m\xf4 tả danh mục...",placeholder:"Đ\xe2y l\xe0 danh mục cho c\xe1c mặt h\xe0ng đồ gia dụng..."})})]})}),(0,n.jsxs)(_.Z,{children:[(0,n.jsx)(m.Z,{variant:"outlined",onClick:P,children:"Huỷ bỏ"}),(0,n.jsx)(p.Z,{type:"submit",color:"primary",variant:"contained",loading:M,children:y?"Cập nhật dữ liệu":"Th\xeam dữ liệu mới"})]})]})})}var y=a(41689);let w=[{field:"id",headerName:"Id",filterable:!1},{field:"name",headerName:"T\xean danh mục",flex:1,minWidth:270,hideable:!1,renderCell:e=>e.row.name},{field:"description",headerName:"M\xf4 tả danh mục",flex:1,minWidth:270,renderCell:e=>e.row.description},{type:"date",field:"createdAt",headerName:"Thời gian tạo",headerAlign:"center",align:"center",filterable:!1,flex:1,minWidth:200,valueFormatter:e=>(0,y.Mu)(e.value.createdAt),renderCell:e=>(0,y.zM)(e.row.createdAt)},{type:"date",field:"updatedAt",headerName:"Cập nhật gần nhất",headerAlign:"center",align:"center",filterable:!1,flex:1,minWidth:200,valueFormatter:e=>(0,y.Mu)(e.value.updatedAt),renderCell:e=>(0,y.zM)(e.row.updatedAt)}];function Z(){let{categories:e}=(0,c.Py)(),{setValues:t}=(0,d.S)();return(0,i.useEffect)(()=>{t({table_data:e,table_column:w,table_selected:[],table_export_data:e.map(e=>({id:e.id,"T\xean danh mục":e.name})),table_config:{table_name:"categories",add_data:!0,add_multi_data:!1,export_data:!0,selected_data:!0,delete_multi:!0,change_status_multi:!1,active_row:!1,edit_row:!0,delete_row:!0}})},[e]),(0,n.jsxs)(l.jx,{hasContent:!0,roles:["teacher"],children:[(0,n.jsx)(r.Z,{}),(0,n.jsx)(j,{})]})}}},function(e){e.O(0,[1425,2771,1396,4549,7212,6672,1923,7133,38,8324,1597,7709,2290,5243,9321,3864,7041,3840,2971,4938,1744],function(){return e(e.s=51573)}),_N_E=e.O()}]);