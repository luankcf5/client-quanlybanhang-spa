(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4221],{42480:function(){},98034:function(e,n,t){Promise.resolve().then(t.bind(t,57884))},9896:function(e,n,t){"use strict";t.d(n,{Ix:function(){return c},QD:function(){return h},cd:function(){return d},dz:function(){return a}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.bill.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({bills:e||[],billsLoading:n,billsError:t,billsValidating:a,billsEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.bills,t,n,a])}async function c(e){let{data:n}=await l.ZP.get("".concat(o,"/").concat(e));return n}async function d(e){let{data:n}=await l.ZP.post(o,e);return n}async function h(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},73318:function(e,n,t){"use strict";t.d(n,{Py:function(){return a},k4:function(){return c},yr:function(){return d}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.category.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({categories:e||[],categoriesLoading:n,categoriesError:t,categoriesValidating:a,categoriesEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.categories,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},29417:function(e,n,t){"use strict";t.d(n,{qy:function(){return a},uG:function(){return d},wK:function(){return c}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.customer.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({customers:e||[],customersLoading:n,customersError:t,customersValidating:a,customersEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.customers,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},41818:function(e,n,t){"use strict";t.d(n,{iu:function(){return a},nM:function(){return d},ry:function(){return c}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.product.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({products:e||[],productsLoading:n,productsError:t,productsValidating:a,productsEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.products,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},13379:function(e,n,t){"use strict";t.d(n,{D0:function(){return a},R$:function(){return d},dB:function(){return c}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.room.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({rooms:e||[],roomsLoading:n,roomsError:t,roomsValidating:a,roomsEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.rooms,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},63477:function(e,n,t){"use strict";t.d(n,{$:function(){return c},Mz:function(){return a},wX:function(){return d}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.voucher.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({vouchers:e||[],vouchersLoading:n,vouchersError:t,vouchersValidating:a,vouchersEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.vouchers,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},64060:function(e,n,t){"use strict";t.d(n,{Z:function(){return d},S:function(){return u}});var i=t(57437),r=t(60443),l=t(59500),o=t(35843),s=t(89975),a=t(69112);let c=(0,o.ZP)("span")(e=>{let{arrow:n,theme:t}=e,i={top:-6.5,transform:"rotate(135deg)"},r={bottom:-6.5,transform:"rotate(-45deg)"},l={left:-6.5,transform:"rotate(45deg)"},o={right:-6.5,transform:"rotate(-135deg)"};return{width:14,height:14,position:"absolute",borderBottomLeftRadius:3.5,clipPath:"polygon(0% 0%, 100% 100%, 0% 100%)",border:"solid 1px ".concat((0,s.Fq)("light"===t.palette.mode?t.palette.grey[500]:t.palette.common.black,.12)),...(0,a.Ls)({color:t.palette.background.paper}),..."top-left"===n&&{...i,left:20},..."top-center"===n&&{...i,left:0,right:0,margin:"auto"},..."top-right"===n&&{...i,right:20},..."bottom-left"===n&&{...r,left:20},..."bottom-center"===n&&{...r,left:0,right:0,margin:"auto"},..."bottom-right"===n&&{...r,right:20},..."left-top"===n&&{...l,top:20},..."left-center"===n&&{...l,top:0,bottom:0,margin:"auto"},..."left-bottom"===n&&{...l,bottom:20},..."right-top"===n&&{...o,top:20},..."right-center"===n&&{...o,top:0,bottom:0,margin:"auto"},..."right-bottom"===n&&{...o,bottom:20}}});function d(e){let{open:n,children:t,arrow:o="top-right",hiddenArrow:s,sx:a,...d}=e,{style:h,anchorOrigin:u,transformOrigin:x}=function(e){let n;switch(e){case"top-left":n={style:{ml:-.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"top-center":n={style:{},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}};break;case"top-right":default:n={style:{ml:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"bottom-left":n={style:{ml:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"bottom-center":n={style:{},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}};break;case"bottom-right":n={style:{ml:.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}};break;case"left-top":n={style:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"left-center":n={anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}};break;case"left-bottom":n={style:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"right-top":n={style:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"right-center":n={anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"}};break;case"right-bottom":n={style:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"}}}return n}(o);return(0,i.jsxs)(l.ZP,{open:!!n,anchorEl:n,anchorOrigin:u,transformOrigin:x,slotProps:{paper:{sx:{width:"auto",overflow:"inherit",...h,["& .".concat(r.Z.root)]:{"& svg":{mr:2,flexShrink:0}},...a}}},...d,children:[!s&&(0,i.jsx)(c,{arrow:o}),t]})}var h=t(2265);function u(){let[e,n]=(0,h.useState)(null);return{open:e,onOpen:(0,h.useCallback)(e=>{n(e.currentTarget)},[]),onClose:(0,h.useCallback)(()=>{n(null)},[]),setOpen:n}}},63854:function(e,n,t){"use strict";t.d(n,{F:function(){return l},z:function(){return o}});var i=t(22135),r=t(41101);function l(e,n,t){let l=(0,r.Z)(),o=(0,i.Z)(l.breakpoints.up(n)),s=(0,i.Z)(l.breakpoints.down(n)),a=(0,i.Z)(l.breakpoints.between(n,t)),c=(0,i.Z)(l.breakpoints.only(n));return"up"===e?o:"down"===e?s:"between"===e?a:c}function o(){let e=(0,r.Z)();return[...e.breakpoints.keys].reverse().reduce((n,t)=>{let r=(0,i.Z)(e.breakpoints.up(t));return!n&&r?t:n},null)||"xs"}},57884:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eq}});var i=t(57437),r=t(2265),l=t(15133),o=t(13457),s=t(85884),a=t(9896),c=t(84693);let d=(0,r.createContext)({}),h=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useSaleContext must be use inside SaleProvider");return e},u={products:[],selectedBill:null};function x(e){let{children:n}=e,[t,l]=(0,r.useState)(u),o=(0,r.useCallback)((e,n)=>{l(t=>({...t,[e]:n}))},[l]),s=(0,r.useCallback)(e=>{o("selectedBill",e),o("products",(null==e?void 0:e.products)||[])},[o]),c=(0,r.useCallback)(e=>{var n,i;if(t.products.map(e=>e.product.id).includes(e.id)){let i=t.products.map(n=>n.product.id===e.id?{...n,amount:n.amount+1,note:n.note}:n);o("products",i),(0,a.QD)(null===(n=t.selectedBill)||void 0===n?void 0:n.id,{orders:i.map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})}else o("products",[{product:e,amount:1},...t.products]),(0,a.QD)(null===(i=t.selectedBill)||void 0===i?void 0:i.id,{orders:[{product:e,amount:1,note:""},...t.products].map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})},[t.products,o,a.QD]),h=(0,r.useCallback)(e=>{var n;let i=t.products.filter(n=>n.product.id!==e);o("products",i),(0,a.QD)(null===(n=t.selectedBill)||void 0===n?void 0:n.id,{orders:i.map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})},[t.products,o]),x=(0,r.useCallback)(async(e,n)=>{var i;let r=t.products.map(t=>t.product.id===e?{...t,note:n}:t);o("products",r),(0,a.QD)(null===(i=t.selectedBill)||void 0===i?void 0:i.id,{orders:r.map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})},[t.products,o]),p=(0,r.useCallback)((e,n)=>{o("products",t.products.map(t=>t.product.id===e?{...t,amount:n}:t))},[t.products,o]),g=(0,r.useMemo)(()=>({...t,setValue:o,onGetBill:s,onAddNote:x,onAddProduct:c,onRemoveProduct:h,onChangeQuantity:p}),[t,o,s,x,c,h,p]);return(0,i.jsx)(d.Provider,{value:g,children:n})}var p=t(44840),g=t.n(p),m=t(3283),j=t(89975),v=t(85269),b=t(65128),Z=t(27680),y=t(55963),f=t(25210),C=t(41101),w=t(63854);let k=(0,r.forwardRef)((e,n)=>{let{asLink:t,variant:r="body1",line:l=2,persistent:o=!1,children:s,sx:a,...c}=e,{lineHeight:d}=function(e){let n=(0,C.Z)(),t=(0,w.z)(),i=n.breakpoints.up("xl"===t?"lg":t),r=Math.round(16*parseFloat((("h1"===e||"h2"===e||"h3"===e||"h4"===e||"h5"===e||"h6"===e)&&n.typography[e][i]?n.typography[e][i]:n.typography[e]).fontSize)),l=Number(n.typography[e].lineHeight)*r,{fontWeight:o,letterSpacing:s}=n.typography[e];return{fontSize:r,lineHeight:l,fontWeight:o,letterSpacing:s}}(r),h={overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:l,WebkitBoxOrient:"vertical",...o&&{height:d*l},...a};return t?(0,i.jsx)(f.Z,{color:"inherit",ref:n,variant:r,sx:{...h},...c,children:s}):(0,i.jsx)(v.Z,{ref:n,variant:r,sx:{...h},...c,children:s})});var z=t(7722),I=t(76623),S=t(55594),T=t(64060),P=t(21135),O=t(79245),_=t(46776);let R=(0,r.forwardRef)((e,n)=>{let{children:t,size:r="medium",...l}=e;return(0,i.jsx)(N,{size:r,children:(0,i.jsx)(_.Z,{size:r,ref:n,...l,children:t})})}),F={hover:{scale:1.1},tap:{scale:.95}},G={hover:{scale:1.09},tap:{scale:.97}},B={hover:{scale:1.08},tap:{scale:.99}};function N(e){let{size:n,children:t}=e;return(0,i.jsx)(O.Z,{component:P.m.div,whileTap:"tap",whileHover:"hover",variants:"small"===n&&F||"large"===n&&B||G,sx:{display:"inline-flex"},children:t})}function H(e){let{productId:n,note:t}=e,{onAddNote:l}=h(),s=(0,T.S)(),[a,c]=(0,r.useState)(t),d=(0,r.useCallback)(()=>{l(n,a),s.onClose()},[l,a,s]),u=(0,r.useCallback)(()=>{l(n,""),c(""),s.onClose()},[l,c,a,s]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R,{color:"primary",onClick:s.onOpen,children:(0,i.jsx)(Z.Z,{icon:"material-symbols:note-alt"})}),(0,i.jsx)(T.Z,{open:s.open,onClose:s.onClose,children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(S.Z,{multiline:!0,rows:4,placeholder:"Ghi ch\xfa về sản phẩm n\xe0y...",value:a,onChange:e=>c(e.target.value)}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(I.Z,{size:"small",color:"error",onClick:u,disabled:!a,children:"Xo\xe1 ghi ch\xfa"}),(0,i.jsx)(I.Z,{size:"small",variant:"contained",color:"primary",onClick:d,disabled:!a,children:"Th\xeam mới"})]})]})})]})}var D=t(97292);function E(){let e=(0,T.S)(),{selectedBill:n}=h(),[t,l]=(0,r.useState)("");(0,r.useEffect)(()=>{l(null==n?void 0:n.note)},[n]);let s=(0,r.useCallback)(()=>{l(""),e.onClose()},[l,e]),c=(0,r.useCallback)(()=>{e.onClose(),(0,a.QD)(null==n?void 0:n.id,{note:t})},[l,e,a.QD,n]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R,{onClick:e.onOpen,disabled:!n,children:(0,i.jsx)(D.Z,{variant:"dot",color:"error",invisible:!t,children:(0,i.jsx)(Z.Z,{icon:"icon-park-solid:people-unknown"})})}),(0,i.jsx)(T.Z,{open:e.open,onClose:e.onClose,arrow:"bottom-right",children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(S.Z,{multiline:!0,rows:6,size:"small",placeholder:"Kỹ thuật vi\xean...",value:t,onChange:e=>l(e.target.value)}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(I.Z,{size:"small",color:"error",onClick:s,disabled:!t,children:"Xo\xe1 th\xf4ng tin"}),(0,i.jsx)(I.Z,{size:"small",variant:"contained",color:"primary",onClick:c,disabled:!t,children:"X\xe1c nhận"})]})]})})]})}var Q=t(55303),A=t(19045),q=t(70812),K=t(81679),L=t(63477);function M(e){let{discountPrice:n,customerSelected:t,setDiscountPrice:l}=e,s=(0,T.S)(),{vouchers:c}=(0,L.Mz)(),[d,u]=(0,r.useState)("1"),{products:x,selectedBill:p}=h(),m=g()(x,e=>e.amount*(e.product.price-e.product.discount)),[j,y]=(0,r.useState)(null),[f,C]=(0,r.useState)(0);(0,r.useEffect)(()=>{y(null==p?void 0:p.voucher),l((null==p?void 0:p.discountPrice)||0)},[p]);let w=(0,r.useCallback)(()=>{y(null),l(0),s.onClose(),(0,a.QD)(null==p?void 0:p.id,{voucherId:null,discountPrice:0})},[y,s,a.QD,p]),k=(0,r.useCallback)((e,n)=>{e&&(y(e),l((null==e?void 0:e.price)?e.price:e.percent/100*m)),"clear"===n&&(y(null),l(0))},[y,j,m,l]),z=(0,r.useCallback)(e=>{y(null),l(Number(e.target.value))},[l]),P=(0,r.useCallback)(e=>{C(Number(e.target.value)),l(Number(e.target.value))},[C,l]),O=(0,r.useCallback)(()=>{j?(0,a.QD)(null==p?void 0:p.id,{voucherId:j.id,discountPrice:(null==j?void 0:j.price)?j.price:j.percent/100*m}):(0,a.QD)(null==p?void 0:p.id,{voucherId:null,discountPrice:Number(null==t?void 0:t.point)>0?f:n}),s.onClose()},[j,a.QD,p,s,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R,{onClick:s.onOpen,disabled:!p,children:(0,i.jsx)(D.Z,{variant:"dot",color:"error",invisible:n<=0,children:(0,i.jsx)(Z.Z,{icon:"mdi:voucher"})})}),(0,i.jsx)(T.Z,{open:s.open,onClose:s.onClose,arrow:"bottom-right",children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(v.Z,{variant:"subtitle2",children:"Th\xf4ng tin giảm gi\xe1"}),(0,i.jsxs)(A.Z,{value:d,onChange:(e,n)=>{u(n)},variant:"fullWidth",sx:{mb:.5},children:[(0,i.jsx)(Q.Z,{label:"M\xe3 giảm gi\xe1",value:"1"}),(0,i.jsx)(Q.Z,{label:"Giảm trực tiếp",value:"2"}),(0,i.jsx)(Q.Z,{label:"Trừ t\xedch điểm",value:"3"})]}),"1"===d&&(0,i.jsx)(q.Z,{size:"small",options:c,getOptionLabel:e=>e.name,isOptionEqualToValue:(e,n)=>e.id===n.id,renderInput:e=>(0,i.jsx)(S.Z,{...e,size:"small",placeholder:"T\xecm kiếm m\xe3 giảm gi\xe1...",margin:"none"}),value:j,onChange:(e,n,t)=>k(n,t),renderOption:V}),"2"===d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z,{variant:"body2",children:"Nhập số tiền giảm trực tiếp:"}),(0,i.jsx)(S.Z,{size:"small",placeholder:"Nhập số tiền giảm trực tiếp...",value:n,type:"number",onChange:e=>z(e),InputProps:{endAdornment:(0,i.jsx)(K.Z,{position:"end",children:(0,i.jsx)(v.Z,{variant:"subtitle2",children:"VNĐ"})})}})]}),"3"===d&&(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(v.Z,{variant:"body2",children:["Kh\xe1ch h\xe0ng : ",(0,i.jsx)("strong",{children:null==t?void 0:t.name})]}),(0,i.jsxs)(v.Z,{variant:"body2",children:["Điểm t\xedch luỹ hiện tại : ",(0,i.jsxs)("strong",{children:[Number(null==t?void 0:t.point)," điểm"]})]})]}):(0,i.jsx)(v.Z,{variant:"subtitle2",children:"Chưa chọn kh\xe1ch h\xe0ng t\xedch điểm !"}),(0,i.jsx)(v.Z,{variant:"body2",children:"Nhập số điểm t\xedch luỹ muốn trừ"}),(0,i.jsx)(S.Z,{disabled:!t,size:"small",placeholder:"Nhập số điểm t\xedch luỹ muốn trừ...",value:f,type:"number",onChange:e=>P(e),InputProps:{endAdornment:(0,i.jsx)(K.Z,{position:"end",children:(0,i.jsxs)(v.Z,{variant:"subtitle2",children:["= ",(0,b.e_)(f)||"0đ"]})})},error:f>Number(null==t?void 0:t.point),helperText:f>Number(null==t?void 0:t.point)?"Số điểm trừ vượt qu\xe1 điểm t\xedch luỹ !!":null})]}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(I.Z,{size:"small",color:"error",onClick:w,disabled:n<=0,children:"Huỷ giảm gi\xe1"}),(0,i.jsx)(I.Z,{size:"small",variant:"contained",color:"primary",disabled:n<=0,onClick:O,children:"\xc1p dụng"})]})]})})]})}let V=(e,n,t)=>{let{selected:r}=t;return(0,i.jsx)(O.Z,{component:"li",...e,children:(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(v.Z,{variant:"subtitle2",color:"textPrimary",children:n.name}),(0,i.jsxs)(v.Z,{variant:"caption",children:["Giảm ",n.price?(0,b.e_)(n.price):"".concat(n.percent,"%")]})]})})};var W=t(29417);function X(e){let{customerSelected:n,setCustomerSelected:t}=e,l=(0,T.S)(),{customers:s}=(0,W.qy)(),{products:c,selectedBill:d}=h();(0,r.useEffect)(()=>{t(null==d?void 0:d.customer)},[d]);let u=g()(c,e=>e.amount*(e.product.price-e.product.discount)),x=(0,r.useCallback)(()=>{t(null),l.onClose(),(0,a.QD)(null==d?void 0:d.id,{customerId:null})},[t,l,a.QD,d]),p=(0,r.useCallback)(()=>{l.onClose(),(0,a.QD)(null==d?void 0:d.id,{customerId:null==n?void 0:n.id})},[l,a.QD,d,n]),m=(0,r.useCallback)((e,n)=>{e&&t(e),"clear"===n&&t(null)},[t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R,{onClick:l.onOpen,disabled:!d,children:(0,i.jsx)(D.Z,{variant:"dot",color:"error",invisible:!n,children:(0,i.jsx)(Z.Z,{icon:"raphael:customer"})})}),(0,i.jsx)(T.Z,{open:l.open,onClose:l.onClose,arrow:"bottom-right",children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(q.Z,{size:"small",options:s,getOptionLabel:e=>e.name,isOptionEqualToValue:(e,n)=>e.id===n.id,renderInput:e=>(0,i.jsx)(S.Z,{...e,size:"small",placeholder:"T\xecm kiếm kh\xe1ch h\xe0ng...",margin:"none"}),value:n,onChange:(e,n,t)=>m(n,t),renderOption:Y}),(0,i.jsx)(v.Z,{variant:"body2",children:(0,i.jsx)("strong",{children:"Th\xf4ng tin kh\xe1ch h\xe0ng cho ho\xe1 đơn"})}),(0,i.jsxs)(v.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Họ v\xe0 t\xean :"})," ",(null==n?void 0:n.name)||"Chưa c\xf3"]}),(0,i.jsxs)(v.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Số điện thoại :"})," ",(null==n?void 0:n.phone)||"Chưa c\xf3"]}),(0,i.jsxs)(v.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Địa chỉ :"})," ",(null==n?void 0:n.address)||"Chưa c\xf3"]}),(0,i.jsxs)(v.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Tổng điểm t\xedch luỹ :"})," ","".concat((null==n?void 0:n.point)||0," điểm")]}),(0,i.jsxs)(v.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"T\xedch điểm từ đơn h\xe0ng :"})," ","".concat(Math.round(u/100)," điểm")]}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(I.Z,{size:"small",color:"error",onClick:x,disabled:!n,children:"Huỷ kh\xe1ch h\xe0ng"}),(0,i.jsx)(I.Z,{size:"small",variant:"contained",color:"primary",onClick:p,disabled:!n,children:"X\xe1c nhận"})]})]})})]})}let Y=(e,n,t)=>{let{selected:r}=t;return(0,i.jsxs)(O.Z,{component:"li",...e,children:[(0,i.jsx)(m.Z,{variant:"square",src:n.name,sx:{borderRadius:.5,mr:1.5}}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(v.Z,{variant:"subtitle2",color:"textPrimary",children:n.name}),(0,i.jsx)(v.Z,{variant:"caption",children:n.phone})]})]})},$=(0,r.forwardRef)((e,n)=>{let{quantity:t,onIncrease:r,onDecrease:l,disabledIncrease:s,disabledDecrease:a,sx:c,...d}=e;return(0,i.jsxs)(o.Z,{ref:n,flexShrink:0,direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:.5,width:88,borderRadius:.5,typography:"subtitle2",border:e=>"solid 1px ".concat((0,j.Fq)(e.palette.grey[500],.2)),...c},...d,children:[(0,i.jsx)(_.Z,{size:"small",onClick:l,disabled:a,sx:{borderRadius:.5},children:(0,i.jsx)(Z.Z,{icon:"eva:minus-fill",width:16})}),t,(0,i.jsx)(_.Z,{size:"small",onClick:r,disabled:s,sx:{borderRadius:.5},children:(0,i.jsx)(Z.Z,{icon:"mingcute:add-line",width:16})})]})});function U(){let{products:e,selectedBill:n,onChangeQuantity:t,onRemoveProduct:s}=h(),[a,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(null);return(0,i.jsxs)(o.Z,{justifyContent:"space-between",sx:{position:"relative"},children:[(null==n?void 0:n.statusId)===2&&(0,i.jsxs)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",sx:{position:"absolute",inset:0,zIndex:9999,bgcolor:e=>(0,j.Fq)(e.palette.background.paper,.68)},children:[(0,i.jsx)(Z.Z,{width:40,icon:"ic:round-lock"}),(0,i.jsx)(v.Z,{variant:"body2",children:"Ho\xe1 đơn n\xe0y đ\xe3 thanh to\xe1n"})]}),(null==n?void 0:n.statusId)===3&&(0,i.jsxs)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",sx:{position:"absolute",inset:0,zIndex:9999,bgcolor:e=>(0,j.Fq)(e.palette.background.paper,.68)},children:[(0,i.jsx)(Z.Z,{width:40,icon:"ic:round-lock"}),(0,i.jsx)(v.Z,{variant:"body2",children:"Ho\xe1 đơn n\xe0y đ\xe3 bị huỷ"})]}),(0,i.jsx)(y.Z,{sx:{height:"calc(100vh - 232px)",backgroundColor:e=>e.palette.grey[100]},children:(0,i.jsx)(o.Z,{component:z.NM,variants:(0,z.pH)().inDown,spacing:1,sx:{padding:1,height:"100%"},children:e.map(e=>{var n;return(0,i.jsxs)(l.Z,{sx:{padding:.75},children:[(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(m.Z,{variant:"square",src:null===(n=e.product)||void 0===n?void 0:n.image,sx:{borderRadius:.5}}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(k,{variant:"body2",line:1,children:e.product.name}),(0,i.jsx)(k,{variant:"caption",line:1,color:e.product.discount>0?"error":"primary",children:"".concat((0,b.e_)(e.product.price-e.product.discount)," x").concat(e.amount," = ").concat((0,b.e_)((e.product.price-e.product.discount)*e.amount))})]})]}),(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)($,{name:"amount",quantity:e.amount,disabledDecrease:e.amount<=1,disabledIncrease:e.amount>=99,onIncrease:()=>t(e.product.id,e.amount+1),onDecrease:()=>t(e.product.id,e.amount-1)}),(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsx)(H,{productId:e.product.id,note:e.note}),(0,i.jsx)(R,{color:"error",onClick:()=>s(e.product.id),children:(0,i.jsx)(Z.Z,{icon:"material-symbols:delete"})})]})]})]}),e.note&&(0,i.jsxs)(v.Z,{variant:"caption",fontStyle:"italic",children:[(0,i.jsx)("strong",{children:"Kỹ thuật vi\xean: "})," ",e.note]})]},e.product.id)})})}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{padding:1},children:[(0,i.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsxs)(v.Z,{variant:"subtitle2",fontWeight:"bold",children:["Tổng tiền:"," ",(0,b.e_)(g()(e,e=>e.amount*(e.product.price-e.product.discount))-a)||"0đ"]}),a>0&&(0,i.jsxs)(v.Z,{variant:"subtitle2",color:"error",children:["( - ",(0,b.e_)(a||0)," )"]})]}),(0,i.jsxs)(o.Z,{direction:"row",spacing:.5,children:[(0,i.jsx)(M,{discountPrice:a,setDiscountPrice:c,customerSelected:d}),(0,i.jsx)(E,{}),(0,i.jsx)(X,{customerSelected:d,setCustomerSelected:u})]})]})]})}var J=t(54986);function ee(e){let{tabView:n,setTabView:t}=e;return(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(J.Z,{sx:{borderStyle:"dashed"}}),(0,i.jsxs)(o.Z,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[(0,i.jsx)(O.Z,{sx:{px:2},children:(0,i.jsxs)(A.Z,{value:n,onChange:(e,n)=>{t(n)},variant:"scrollable",children:[(0,i.jsx)(Q.Z,{label:"Ho\xe1 đơn",value:"1",icon:(0,i.jsx)(Z.Z,{icon:"solar:bill-list-bold"})}),(0,i.jsx)(Q.Z,{label:"Ph\xf2ng / b\xe0n",value:"2",icon:(0,i.jsx)(Z.Z,{icon:"material-symbols:meeting-room"})})]})}),(0,i.jsx)(O.Z,{sx:{flexGrow:1}}),(0,i.jsx)(v.Z,{variant:"subtitle2",fontWeight:"bold",sx:{mr:1.5},children:"Bản quyền c\xf4ng ty cổ phần IIT \xa9 2024"})]})]})}function en(){let e=(0,T.S)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Z,{size:"large",onClick:e.onOpen,children:(0,i.jsx)(Z.Z,{color:"white",icon:"mingcute:print-fill"})}),(0,i.jsx)(T.Z,{hiddenArrow:!0,open:e.open,onClose:e.onClose,sx:{width:280},children:(0,i.jsx)(o.Z,{spacing:1,p:1,children:(0,i.jsxs)(v.Z,{variant:"subtitle2",children:["M\xe1y in kết nối : ",(0,i.jsx)("strong",{children:"Chưa t\xecm thấy"})]})})})]})}var et=t(92580),ei=t(41689);function er(e){let{bills:n}=e,{onGetBill:t}=h(),r=async(e,n)=>{n&&t((await et.ZP.get("bills/".concat(n.id))).data),"clear"===e&&t(null)};return(0,i.jsx)(q.Z,{size:"small",options:n,getOptionLabel:e=>"Ho\xe1 đơn số ".concat(e.id),isOptionEqualToValue:(e,n)=>e.id===n.id,renderInput:e=>(0,i.jsx)(S.Z,{...e,size:"small",placeholder:"T\xecm kiếm ho\xe1 đơn...",margin:"none"}),onChange:(e,n,t)=>r(t,n),renderOption:el,sx:{bgcolor:"background.default",borderRadius:.5,width:{xs:"100%",md:350}}})}let el=(e,n,t)=>{let{selected:r}=t;return(0,i.jsx)(O.Z,{component:"li",...e,children:(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(v.Z,{variant:"subtitle2",color:"textPrimary",children:["Ho\xe1 đơn số ",n.id]}),(0,i.jsx)(v.Z,{variant:"caption",children:(0,ei.zM)(n.createdAt)})]})})};var eo=t(8653);function es(e){let{onAddNewBill:n}=e,{onGetBill:t}=h(),{enqueueSnackbar:l}=(0,eo.Ds)(),s=(0,r.useCallback)(async()=>{try{let e=await (0,a.cd)({statusId:1,regularPrice:0,discountPrice:0,totalPrice:0});n(e),t(e),l("Đ\xe3 th\xeam ho\xe1 đơn mới !")}catch(e){console.log(e),l(e.message||e.message[0]||"Đ\xe3 c\xf3 lỗi xảy ra ! Vui l\xf2ng thử lại !",{variant:"error"})}},[n,t,l]);return(0,i.jsx)(o.Z,{children:(0,i.jsx)(I.Z,{variant:"contained",color:"secondary",onClick:s,children:"Ho\xe1 đơn mới"})})}var ea=t(64494);let ec=[{key:"F2",label:"Th\xeam ho\xe1 đơn mới"},{key:"F4",label:"Thanh to\xe1n ho\xe1 đơn"},{key:"F7",label:"Chế độ xem ho\xe1 đơn"},{key:"F8",label:"Chế độ xem ph\xf2ng b\xe0n"},{key:"F11",label:"To\xe0n m\xe0n h\xecnh"},{key:"ESC",label:"Tho\xe1t to\xe0n m\xe0n h\xecnh"}];function ed(){let e=(0,T.S)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.Z,{size:"large",onClick:e.onOpen,children:(0,i.jsx)(Z.Z,{color:"white",icon:"ooui:keyboard"})}),(0,i.jsx)(T.Z,{hiddenArrow:!0,open:e.open,onClose:e.onClose,children:(0,i.jsx)(o.Z,{children:ec.map((e,n)=>(0,i.jsx)(ea.Z,{children:(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",width:250,children:[(0,i.jsxs)(v.Z,{variant:"subtitle2",fontWeight:700,children:[e.key," :"]}),(0,i.jsx)(v.Z,{variant:"subtitle2",color:"text.disabled",children:e.label})]})},n))})})]})}function eh(e){let{billList:n,handleAddNewBill:t}=e;return(0,i.jsxs)(o.Z,{direction:"row",spacing:2,alignItems:"center",sx:{bgcolor:"primary.main",padding:1},children:[(0,i.jsx)(er,{bills:n}),(0,i.jsx)(es,{onAddNewBill:t}),(0,i.jsx)(O.Z,{sx:{flexGrow:1}}),(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsx)(en,{}),(0,i.jsx)(ed,{})]})]})}var eu=t(2589),ex=t(27707),ep=t(13379),eg=t(35691),em=t(61865),ej=t(89701),ev=t(22079),eb=t(137),eZ=t(91797),ey=t(42834),ef=t(26337),eC=t(27558);function ew(e){let{open:n,onClose:t,onAddRoom:l}=e,{enqueueSnackbar:s}=(0,eo.Ds)(),a=eg.Ry().shape({name:eg.Z_().required("Bạn chưa nhập t\xean cho m\xe3 ph\xf2ng b\xe0n !"),isVip:eg.O7().required("Bạn chưa chọn loại ph\xf2ng !")}),c=(0,em.cI)({resolver:(0,ej.X)(a),defaultValues:{name:"",isVip:!1}}),{reset:d,handleSubmit:h,formState:{isSubmitting:u}}=c,x=h(async e=>{try{let n=await (0,ep.dB)(e);l(n),s("Đ\xe3 th\xeam dữ liệu m\xe3 ph\xf2ng b\xe0n mới !"),d(),p()}catch(e){console.log(e),s(e.message[0]||e.message||"Đ\xe3 c\xf3 lỗi xảy ra !  Vui l\xf2ng thử lại !",{variant:"error"})}}),p=(0,r.useCallback)(()=>{d(),t()},[d,t]);return(0,i.jsx)(ev.Z,{fullWidth:!0,maxWidth:"sm",open:n,onClose:p,children:(0,i.jsxs)(eC.ZP,{methods:c,onSubmit:x,children:[(0,i.jsx)(eZ.Z,{children:"Th\xeam dữ liệu ph\xf2ng b\xe0n mới"}),(0,i.jsx)(ef.Z,{children:(0,i.jsxs)(o.Z,{spacing:2,children:[(0,i.jsx)(eC.jY,{label:"T\xean ph\xf2ng b\xe0n :",required:!0,children:(0,i.jsx)(eC.au,{name:"name",label:"Nhập t\xean ph\xf2ng b\xe0n",placeholder:"B\xe0n số 01..."})}),(0,i.jsx)(eC.jY,{label:"Loại ph\xf2ng :",required:!0,children:(0,i.jsx)(eC._e,{name:"isVip",label:"Ph\xf2ng cao cấp / ph\xf2ng Vip"})})]})}),(0,i.jsxs)(ey.Z,{children:[(0,i.jsx)(I.Z,{variant:"outlined",onClick:p,children:"Huỷ bỏ"}),(0,i.jsx)(eb.Z,{type:"submit",color:"primary",variant:"contained",loading:u,children:"Th\xeam dữ liệu mới"})]})]})})}function ek(e){let{setTabView:n,onAddNewBill:t}=e,{onGetBill:c}=h(),{rooms:d}=(0,ep.D0)(),u=(0,ex.k)(),[x,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{p(d)},[d]);let g=(0,r.useCallback)(e=>{p(n=>[...n,e])},[p]),m=(0,r.useCallback)(async e=>{if(null==e?void 0:e.currentBill)c((await et.ZP.get("bills/".concat(null==e?void 0:e.currentBill.id))).data);else{let n=await (0,a.cd)({statusId:1,regularPrice:0,discountPrice:0,totalPrice:0});c(n),(0,a.QD)(n.id,{roomId:e.id}),t(n)}n("1")},[c,a.cd,t,n,a.QD]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(O.Z,{sx:{p:1,height:"100%"},children:(0,i.jsxs)(s.Z,{container:!0,spacing:2,children:[x.map((e,n)=>(0,i.jsx)(s.Z,{xs:6,md:2,children:(0,i.jsx)(eu.Z,{onClick:()=>m(e),children:(0,i.jsx)(l.Z,{sx:{aspectRatio:"1/1",boxShadow:e=>e.shadows[3]},children:(0,i.jsxs)(o.Z,{justifyContent:"space-between",alignItems:"center",paddingTop:1,height:"100%",width:"100%",children:[(0,i.jsx)(v.Z,{variant:"subtitle2",children:e.name}),(0,i.jsx)(Z.Z,{width:56,color:e.isVip?"warning.main":"unset",icon:e.isVip?"tabler:vip":"ic:baseline-table-restaurant"}),(0,i.jsx)(I.Z,{fullWidth:!0,color:e.currentBill?"warning":"primary",variant:"contained",sx:{borderTopLeftRadius:0,borderTopRightRadius:0},children:e.currentBill?"Đang c\xf3 kh\xe1ch":"Chọn dịch vụ"})]})})})},e.id)),(0,i.jsx)(s.Z,{xs:6,md:2,children:(0,i.jsx)(eu.Z,{onClick:u.onTrue,children:(0,i.jsx)(l.Z,{sx:{aspectRatio:"1/1",boxShadow:e=>e.shadows[3]},children:(0,i.jsxs)(o.Z,{justifyContent:"space-between",alignItems:"center",paddingTop:1,height:"100%",width:"100%",children:[(0,i.jsx)(v.Z,{variant:"subtitle2",children:"B\xe0n mới"}),(0,i.jsx)(Z.Z,{width:56,icon:"ic:baseline-table-restaurant"}),(0,i.jsx)(I.Z,{fullWidth:!0,color:"secondary",variant:"contained",sx:{borderTopLeftRadius:0,borderTopRightRadius:0},children:"Th\xeam b\xe0n"})]})})})})]})}),(0,i.jsx)(ew,{open:u.value,onClose:u.onFalse,onAddRoom:g})]})}var ez=t(41818),eI=t(73318),eS=t(14340),eT=t(78276);eS.Zx.register({family:"Roboto",fonts:[{src:"/fonts/Roboto-Regular.ttf"},{src:"/fonts/Roboto-Bold.ttf"}]});let eP=eS.mM.create({col4:{width:"25%"},col8:{width:"75%"},col6:{width:"50%"},col12:{width:"100%"},mb4:{marginBottom:4},mb8:{marginBottom:8},mb40:{marginBottom:40},overline:{fontSize:6,marginBottom:8,fontWeight:700},h3:{fontSize:16,fontWeight:700,textTransform:"uppercase"},h4:{fontSize:9,fontWeight:700},h5:{fontSize:7,fontWeight:500},body1:{fontSize:6},subtitle2:{fontSize:6,fontWeight:700},alignRight:{textAlign:"right"},alignCenter:{textAlign:"center"},page:{paddingBottom:"20px",fontSize:8,fontWeight:900,fontFamily:"Roboto",backgroundColor:"#FFFFFF"},footer:{left:0,right:0,bottom:0,padding:24,margin:"auto",borderTopWidth:1,borderStyle:"solid",position:"absolute",borderColor:"#DFE3E8"},gridContainer:{flexDirection:"row",justifyContent:"space-between"},table:{display:"flex",width:"auto"},tableHeader:{},tableBody:{},tableRow:{padding:"8px 0",flexDirection:"row",borderBottomWidth:1,borderStyle:"solid",borderColor:"#DFE3E8"},noBorder:{paddingTop:8,paddingBottom:0,borderBottomWidth:0},tableCell_1:{width:"10%"},tableCell_2:{width:"50%",paddingRight:16},tableCell_3:{width:"20%"},tableCell_5:{width:"50%"}});function eO(e){var n;let{title:t,invoice:r,products:l,open:o,onClose:s}=e,a=g()(l,e=>e.amount*(e.product.price-e.product.discount));return(0,i.jsx)(ev.Z,{fullScreen:!0,open:o,children:(0,i.jsxs)(O.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(ey.Z,{sx:{zIndex:9,padding:"12px !important",boxShadow:e=>e.customShadows.z8},children:(0,i.jsx)(eT.Z,{title:"Đ\xf3ng",children:(0,i.jsx)(_.Z,{color:"inherit",onClick:s,children:(0,i.jsx)(Z.Z,{icon:"eva:close-fill"})})})}),(0,i.jsx)(O.Z,{sx:{flexGrow:1,height:"100%",overflow:"hidden"},children:(0,i.jsx)(eS.Z$,{width:"100%",height:"100%",style:{border:"none"},children:(0,i.jsx)(eS.BB,{children:(0,i.jsxs)(eS.T3,{wrap:!1,size:"C8",style:eP.page,children:[(0,i.jsx)(eS.G7,{style:[eP.gridContainer,eP.mb8],children:(0,i.jsxs)(eS.G7,{style:{alignItems:"center",width:"100%",flexDirection:"column"},children:[(0,i.jsx)(eS.xv,{style:eP.h5,children:"SPA SAN SAN"}),(0,i.jsx)(eS.xv,{style:[eP.body1,eP.alignCenter],children:"A3-21 Đường 1B Khu Nam Long"}),(0,i.jsx)(eS.xv,{style:[eP.body1,eP.alignCenter],children:"Hưng Thạnh, Q.C\xe1i Răng, TP.Cần Thơ"}),(0,i.jsx)(eS.xv,{style:[eP.body1,eP.alignCenter],children:"Hotline/Zalo : 0913 984 886"}),(0,i.jsx)(eS.xv,{style:eP.h4,children:t}),(0,i.jsxs)(eS.xv,{style:eP.h4,children:["Ho\xe1 đơn số ",null==r?void 0:r.id]}),(0,i.jsx)(eS.xv,{children:"".concat((0,ei.zM)(null==r?void 0:r.createdAt))})]})}),(0,i.jsx)(eS.G7,{style:[eP.gridContainer],children:(0,i.jsx)(eS.G7,{style:eP.col12,children:(0,i.jsxs)(eS.xv,{style:[eP.overline],children:["Kh\xe1ch h\xe0ng : ",null==r?void 0:null===(n=r.customer)||void 0===n?void 0:n.name]})})}),(0,i.jsx)(eS.xv,{style:[eP.overline],children:"Chi tiết đơn h\xe0ng"}),(0,i.jsxs)(eS.G7,{style:eP.table,children:[(0,i.jsx)(eS.G7,{style:eP.tableHeader,children:(0,i.jsxs)(eS.G7,{style:eP.tableRow,children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_2,children:(0,i.jsx)(eS.xv,{style:eP.subtitle2,children:"T\xean dịch vụ"})}),(0,i.jsx)(eS.G7,{style:eP.tableCell_3,children:(0,i.jsx)(eS.xv,{style:eP.subtitle2,children:"SL"})}),(0,i.jsx)(eS.G7,{style:eP.tableCell_3,children:(0,i.jsx)(eS.xv,{style:eP.subtitle2,children:"Đơn gi\xe1"})})]})}),(0,i.jsxs)(eS.G7,{style:eP.tableBody,children:[null==l?void 0:l.map((e,n)=>(0,i.jsxs)(eS.G7,{style:eP.tableRow,children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_2,children:(0,i.jsx)(eS.xv,{style:eP.subtitle2,children:e.product.name})}),(0,i.jsx)(eS.G7,{style:eP.tableCell_3,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:e.amount})}),(0,i.jsx)(eS.G7,{style:eP.tableCell_3,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:(0,b.e_)(e.product.price-e.product.discount)})})]},e.id)),(null==r?void 0:r.name)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eS.G7,{style:[eP.tableRow,eP.noBorder],children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_5,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:"Địa chỉ giao h\xe0ng : "})}),(0,i.jsx)(eS.G7,{style:[eP.tableCell_5,eP.alignRight],children:(0,i.jsx)(eS.xv,{style:eP.body1,children:(null==r?void 0:r.address)||"Kh\xf4ng"})})]}),(0,i.jsxs)(eS.G7,{style:[eP.tableRow,eP.noBorder],children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_5,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:"Điện thoại giao h\xe0ng : "})}),(0,i.jsx)(eS.G7,{style:[eP.tableCell_5,eP.alignRight],children:(0,i.jsx)(eS.xv,{style:eP.body1,children:(null==r?void 0:r.phone)||"Kh\xf4ng"})})]}),(0,i.jsxs)(eS.G7,{style:[eP.tableRow,eP.noBorder],children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_5,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:"Người nhận h\xe0ng : "})}),(0,i.jsx)(eS.G7,{style:[eP.tableCell_5,eP.alignRight],children:(0,i.jsx)(eS.xv,{style:eP.body1,children:(null==r?void 0:r.name)||"Kh\xf4ng"})})]}),(0,i.jsxs)(eS.G7,{style:[eP.tableRow,eP.noBorder],children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_5,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:"Ph\xed giao h\xe0ng : "})}),(0,i.jsx)(eS.G7,{style:[eP.tableCell_5,eP.alignRight],children:(0,i.jsx)(eS.xv,{style:eP.body1,children:(0,b.e_)(null==r?void 0:r.fee)||"0đ"})})]})]}),(0,i.jsxs)(eS.G7,{style:[eP.tableRow,eP.noBorder],children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_5,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:"Kỹ thuật vi\xean : "})}),(0,i.jsx)(eS.G7,{style:[eP.tableCell_5,eP.alignRight],children:(0,i.jsx)(eS.xv,{style:eP.body1,children:(null==r?void 0:r.note)||"Kh\xf4ng"})})]}),(null==r?void 0:r.discountPrice)>0&&(0,i.jsxs)(eS.G7,{style:[eP.tableRow,eP.noBorder],children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_5,children:(0,i.jsx)(eS.xv,{style:eP.body1,children:"Giảm gi\xe1 : "})}),(0,i.jsx)(eS.G7,{style:[eP.tableCell_5,eP.alignRight],children:(0,i.jsx)(eS.xv,{style:eP.body1,children:(0,b.e_)((null==r?void 0:r.discountPrice)||"0đ")})})]}),(0,i.jsxs)(eS.G7,{style:[eP.tableRow,eP.noBorder],children:[(0,i.jsx)(eS.G7,{style:eP.tableCell_5,children:(0,i.jsx)(eS.xv,{style:eP.h4,children:"Tổng tiền : "})}),(0,i.jsx)(eS.G7,{style:[eP.tableCell_5,eP.alignRight],children:(0,i.jsx)(eS.xv,{style:eP.h4,children:(0,b.e_)(a-Number(null==r?void 0:r.discountPrice)||"0đ")})})]})]})]})]})})})})]})})}function e_(){let e=(0,ex.k)(),{selectedBill:n,products:t}=h(),[l,o]=(0,r.useState)(null),s=(0,r.useCallback)(async()=>{o(await (0,a.Ix)(null==n?void 0:n.id)),e.onTrue()},[a.Ix,n,o,e]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.Z,{variant:"contained",size:"small",color:"warning",onClick:s,children:"Tạm t\xednh"}),(0,i.jsx)(eO,{title:"HO\xc1 ĐƠN TẠM T\xcdNH",invoice:l,products:t,open:e.value,onClose:e.onFalse})]})}var eR=t(92173),eF=t(22734);function eG(){var e;let{selectedBill:n,products:t,onGetBill:l}=h(),[c,d]=(0,r.useState)(null),u=(0,ex.k)(),x=(0,ex.k)(),p=g()(t,e=>e.amount*(e.product.price-e.product.discount)),m=(0,r.useCallback)(async()=>{try{var e,n,i;await eR.Z.post("https://api.telegram.org/bot".concat("7041679216:AAHca7dv6I9pQLi_nS0UdjYrF3jrRw9U1Qs","/sendMessage"),{chat_id:"@phanmembanhangspa",text:"ĐƠN H\xc0NG THANH TO\xc1N TH\xc0NH C\xd4NG\nM\xe3 số đơn h\xe0ng: Đơn h\xe0ng số ".concat(null==c?void 0:c.id,"\n").concat(t.map((e,n)=>"".concat(n+1,". ").concat(e.product.name," x ").concat(e.amount," = ").concat((0,b.e_)((e.product.price-e.product.discount)*e.amount),"\n")),"Kỹ thuật vi\xean: ").concat((null==c?void 0:c.note)||"Kh\xf4ng c\xf3","\nTổng tiền: ").concat((0,b.e_)(p),"\nGiảm gi\xe1: ").concat((0,b.e_)((null==c?void 0:c.discountPrice)||0),"\nTh\xe0nh tiền: ").concat((0,b.e_)(p-((null==c?void 0:c.discountPrice)||0)),"\nT\xean kh\xe1ch h\xe0ng: ").concat((null==c?void 0:null===(e=c.customer)||void 0===e?void 0:e.name)||"Kh\xe1ch h\xe0ng","\nSố điện thoại: ").concat((null==c?void 0:null===(n=c.customer)||void 0===n?void 0:n.phone)||"Kh\xf4ng c\xf3","\nĐịa chỉ: ").concat((null==c?void 0:null===(i=c.customer)||void 0===i?void 0:i.address)||"Kh\xf4ng c\xf3","\nNơi giao h\xe0ng: ").concat((null==c?void 0:c.address)||"Kh\xf4ng c\xf3","\nSố điện thoại người nhận: ").concat((null==c?void 0:c.phone)||"Kh\xf4ng c\xf3","\nNgười nhận h\xe0ng: ").concat((null==c?void 0:c.address)||"Kh\xf4ng c\xf3","\nPh\xed giao h\xe0ng: ").concat((0,b.e_)((null==c?void 0:c.fee)||0))})}catch(e){console.log(e)}},[c,t]),j=(0,r.useCallback)(async()=>{d(await (0,a.Ix)(null==n?void 0:n.id)),u.onTrue()},[a.Ix,n,d,u]),f=(0,r.useCallback)(()=>{x.onTrue(),(0,a.QD)(null==c?void 0:c.id,{statusId:2,roomId:null}),(null==c?void 0:c.customer)&&(0,W.uG)(null==c?void 0:c.customer.id,{point:c.customer.point+Math.round(p/100)}),m()},[p,x,n,a.Ix,a.QD,W.uG,m]),C=(0,r.useCallback)(()=>{u.onFalse(),x.onFalse(),l(null)},[u,x,l]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.Z,{variant:"contained",size:"small",color:"primary",onClick:j,disabled:(null==n?void 0:n.statusId)!==1||0===t.length,children:"Thanh to\xe1n"}),(0,i.jsx)(eF.ZP,{open:u.value,onClose:u.onFalse,anchor:"right",children:(0,i.jsxs)(o.Z,{justifyContent:"space-between",alignItems:"center",spacing:2,sx:{paddingY:2,paddingX:3,height:"100%",width:{xs:320,md:550}},children:[(0,i.jsxs)(s.Z,{container:!0,spacing:1,children:[(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(v.Z,{variant:"body2",align:"right",children:(0,ei.zM)(null==c?void 0:c.createdAt)}),(0,i.jsx)(_.Z,{onClick:u.onFalse,children:(0,i.jsx)(Z.Z,{icon:"ep:close-bold"})})]})}),(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsx)(J.Z,{sx:{borderStyle:"dashed"}})}),(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsxs)(v.Z,{variant:"h6",textTransform:"uppercase",textAlign:"center",sx:{py:1},children:["Ho\xe1 đơn số ",null==c?void 0:c.id]})}),(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsxs)(v.Z,{variant:"body2",children:["Kh\xe1ch h\xe0ng : ",(0,i.jsx)("strong",{children:(null==c?void 0:null===(e=c.customer)||void 0===e?void 0:e.name)||"Kh\xe1ch h\xe0ng"})]})}),(0,i.jsxs)(s.Z,{xs:12,children:[(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsx)(v.Z,{variant:"subtitle2",sx:{width:"25%"},children:"T\xean mặt h\xe0ng"}),(0,i.jsx)(v.Z,{variant:"subtitle2",sx:{width:"25%"},children:"Số lượng"}),(0,i.jsx)(v.Z,{variant:"subtitle2",sx:{width:"25%"},children:"Đơn gi\xe1"}),(0,i.jsx)(v.Z,{variant:"subtitle2",sx:{width:"25%"},children:"Th\xe0nh tiền"})]}),(0,i.jsx)(y.Z,{sx:{height:"calc(100vh - 400px)"},children:t.map((e,n)=>(0,i.jsxs)(s.Z,{xs:12,children:[(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsxs)(k,{variant:"body2",line:1,sx:{width:"25%"},children:[n+1,". ",e.product.name]}),(0,i.jsx)(k,{variant:"body2",line:1,sx:{width:"25%"},children:e.amount}),(0,i.jsx)(k,{variant:"body2",line:1,sx:{width:"25%"},children:(0,b.e_)(e.product.price)}),(0,i.jsx)(k,{variant:"body2",line:1,sx:{width:"25%"},children:(0,b.e_)(Number(e.product.price)*Number(e.amount))})]}),e.note&&(0,i.jsxs)(v.Z,{variant:"caption",children:["Kỹ thuật vi\xean : ",e.note]})]}))})]}),(0,i.jsx)(s.Z,{xs:6}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(J.Z,{sx:{borderStyle:"dashed"}})}),(null==c?void 0:c.note)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{variant:"body2",children:"Kỹ thuật vi\xean :"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{variant:"body2",align:"right",children:null==c?void 0:c.note})})]}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{variant:"body2",children:"Giảm gi\xe1 :"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{variant:"body2",align:"right",children:(0,b.e_)(Number(null==c?void 0:c.discountPrice))||"0đ"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{variant:"body2",children:"Giao h\xe0ng :"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{variant:"body2",align:"right",children:(0,i.jsx)(v.Z,{children:(0,b.e_)(Number(null==c?void 0:c.fee))||"0đ"})})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{variant:"body2",children:"Tổng tiền:"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(v.Z,{align:"right",children:(0,i.jsx)(v.Z,{variant:"h6",children:(0,b.e_)(p-Number(null==c?void 0:c.discountPrice))||"0đ"})})})]}),(0,i.jsx)(I.Z,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:f,children:"X\xe1c nhận thanh to\xe1n"})]})}),(0,i.jsx)(eO,{title:"HO\xc1 ĐƠN THANH TO\xc1N",invoice:c,products:t,open:x.value,onClose:C})]})}var eB=t(36953),eN=t(17078);function eH(){let{selectedBill:e}=h(),n=(0,ex.k)(),{onGetBill:t}=h(),{enqueueSnackbar:l}=(0,eB.Ds)(),o=(0,r.useCallback)(()=>{(0,a.QD)(null==e?void 0:e.id,{statusId:3}),t(null),n.onFalse(),l("Huỷ đơn h\xe0ng th\xe0nh c\xf4ng !")},[e,n,a.QD,t,l]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.Z,{variant:"contained",size:"small",color:"error",onClick:n.onTrue,disabled:(null==e?void 0:e.statusId)!==2,children:"Huỷ đơn"}),(0,i.jsx)(eN.Q,{open:n.value,onClose:n.onFalse,title:"X\xe1c nhận huỷ đơn h\xe0ng",content:"Bạn c\xf3 chắc muốn huỷ đơn h\xe0ng n\xe0y kh\xf4ng ( đơn h\xe0ng bị huỷ sẽ kh\xf4ng được t\xednh v\xe0o doanh thu ) ?",action:(0,i.jsx)(I.Z,{variant:"contained",color:"error",onClick:o,children:"X\xe1c nhận huỷ"})})]})}function eD(){return(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",sx:{padding:1},children:[(0,i.jsx)(eH,{}),(0,i.jsxs)(o.Z,{direction:"row",spacing:.5,children:[(0,i.jsx)(e_,{}),(0,i.jsx)(eG,{})]})]})}function eE(e){let{products:n}=e,{selectedBill:t,onAddProduct:r}=h();return(0,i.jsxs)(y.Z,{sx:{height:"calc(100vh - 280px)",position:"relative"},children:[(null==t?void 0:t.statusId)===2&&(0,i.jsxs)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",sx:{position:"absolute",inset:0,zIndex:9999,bgcolor:e=>(0,j.Fq)(e.palette.background.paper,.68)},children:[(0,i.jsx)(Z.Z,{width:40,icon:"ic:round-lock"}),(0,i.jsx)(v.Z,{variant:"body2",children:"Ho\xe1 đơn n\xe0y đ\xe3 thanh to\xe1n"})]}),(null==t?void 0:t.statusId)===3&&(0,i.jsxs)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",sx:{position:"absolute",inset:0,zIndex:9999,bgcolor:e=>(0,j.Fq)(e.palette.background.paper,.68)},children:[(0,i.jsx)(Z.Z,{width:40,icon:"ic:round-lock"}),(0,i.jsx)(v.Z,{variant:"body2",children:"Ho\xe1 đơn n\xe0y đ\xe3 bị huỷ"})]}),(0,i.jsx)(O.Z,{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(2, 1fr)"},gap:1,children:n.sort((e,n)=>e.code-n.code).map(e=>(0,i.jsx)(eu.Z,{onClick:()=>r(e),children:(0,i.jsx)(l.Z,{sx:{padding:.75},children:(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(m.Z,{variant:"square",src:e.image,sx:{borderRadius:.5}}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(k,{variant:"body2",line:1,children:e.name}),(0,i.jsxs)(o.Z,{direction:"row",spacing:.5,children:[(0,i.jsx)(k,{line:1,color:"primary",variant:"caption",sx:{textDecoration:e.discount>0?"line-through":"unset"},children:(0,b.e_)(e.price)}),e.discount>0&&(0,i.jsx)(k,{line:1,color:"error",variant:"caption",children:(0,b.e_)(e.price-e.discount)})]})]})]})})},e.id))})]})}function eQ(e){let{categories:n,filterName:t,setFilterName:l,filterCategory:s,setFilterCategory:a}=e,c=(0,T.S)(),d=(0,r.useCallback)(e=>{l(e.target.value)},[l]),h=(0,r.useCallback)(e=>{a(s.includes(e)?s.filter(n=>n!==e):[...s,e])},[s,a]),u=(0,r.useCallback)(()=>{a([])},[s,a]);return(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",p:1,children:[(0,i.jsx)(S.Z,{size:"small",value:t,onChange:d,placeholder:"T\xecm kiếm sản phẩm...",InputProps:{startAdornment:(0,i.jsx)(K.Z,{position:"start",children:(0,i.jsx)(Z.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,i.jsx)(D.Z,{color:"error",variant:"dot",invisible:!s.length,children:(0,i.jsx)(I.Z,{variant:"contained",color:"primary",endIcon:(0,i.jsx)(Z.Z,{icon:c.open?"eva:chevron-up-fill":"eva:chevron-down-fill"}),onClick:c.onOpen,children:"Ph\xe2n loại"})}),(0,i.jsx)(T.Z,{hiddenArrow:!0,open:c.open,onClose:c.onClose,sx:{p:1,width:320},children:(0,i.jsxs)(o.Z,{spacing:1,children:[(0,i.jsx)(y.Z,{sx:{maxHeight:350},children:(0,i.jsx)(O.Z,{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(1, 1fr)"},gap:1,children:n.map(e=>{let n=s.includes(e.name);return(0,i.jsx)(eu.Z,{onClick:()=>h(e.name),sx:{p:1,borderRadius:1,cursor:"pointer",color:"text.secondary",border:e=>"solid 1px ".concat((0,j.Fq)(e.palette.grey[500],.12)),...n&&{color:"text.primary",bgcolor:"action.selected"}},children:(0,i.jsx)(o.Z,{spacing:1,direction:"row",children:(0,i.jsx)(v.Z,{variant:"body2",children:e.name})})},e.id)})})}),(0,i.jsxs)(o.Z,{spacing:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[(0,i.jsx)(I.Z,{variant:"outlined",color:"inherit",onClick:u,children:"L\xe0m mới"}),(0,i.jsx)(I.Z,{variant:"contained",color:"primary",onClick:c.onClose,children:"Lọc dữ liệu"})]})]})})]})}function eA(){let{products:e}=(0,ez.iu)(),{selectedBill:n}=h(),{categories:t}=(0,eI.Py)(),[s,a]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),u=function(e){let{inputData:n,filterName:t,filterCategory:i}=e;return t&&(n=n.filter(e=>{var n;return(null==e?void 0:null===(n=e.name)||void 0===n?void 0:n.toLowerCase().indexOf(t.toLowerCase()))!==-1})),i.length&&(n=n.filter(e=>i.includes(e.category.name))),n}({inputData:e,filterName:s,filterCategory:c});return(0,i.jsxs)(l.Z,{sx:{height:"100%",width:"100%",position:"relative"},children:[!n&&(0,i.jsxs)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",sx:{position:"absolute",inset:0,zIndex:9999,bgcolor:e=>(0,j.Fq)(e.palette.background.paper,.68)},children:[(0,i.jsx)(Z.Z,{width:40,icon:"ic:round-lock"}),(0,i.jsx)(v.Z,{variant:"body2",children:"Bạn chưa chọn ho\xe1 đơn"})]}),(0,i.jsxs)(o.Z,{sx:{height:"100%"},children:[(0,i.jsx)(eQ,{categories:t,filterName:s,filterCategory:c,setFilterCategory:d,setFilterName:a}),(0,i.jsx)(eE,{products:u}),(0,i.jsx)(J.Z,{sx:{borderStyle:"dashed"}}),(0,i.jsx)(eD,{})]})]})}function eq(){let{bills:e}=(0,a.dz)(),[n,t]=(0,r.useState)("1"),[d,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{h(e)},[e]);let u=(0,r.useCallback)(e=>{h(n=>[...n,e])},[h]);return(0,i.jsx)(x,{children:(0,i.jsx)(c.jx,{hasContent:!0,roles:["teacher"],children:(0,i.jsx)(l.Z,{sx:{borderRadius:0,height:"calc(100vh - 56px)"},children:(0,i.jsxs)(o.Z,{height:"100%",justifyContent:"space-between",children:[(0,i.jsx)(eh,{billList:d,handleAddNewBill:u}),"1"===n&&(0,i.jsxs)(s.Z,{container:!0,sx:{p:1,height:"100%"},children:[(0,i.jsx)(s.Z,{xs:12,md:6,children:(0,i.jsx)(U,{})}),(0,i.jsx)(s.Z,{xs:12,md:6,children:(0,i.jsx)(eA,{})})]}),"2"===n&&(0,i.jsx)(ek,{setTabView:t,onAddNewBill:u}),(0,i.jsx)(ee,{tabView:n,setTabView:t})]})})})})}}}]);