(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4221],{42480:function(){},98034:function(e,n,t){Promise.resolve().then(t.bind(t,48926))},9896:function(e,n,t){"use strict";t.d(n,{QD:function(){return h},aV:function(){return c},cd:function(){return d},dz:function(){return a}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.bill.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({bills:e||[],billsLoading:n,billsError:t,billsValidating:a,billsEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.bills,t,n,a])}function c(e){let{data:n,isLoading:t,error:s,isValidating:a}=(0,i.ZP)(e?"".concat(o,"/").concat(e):null,l._i);return(0,r.useMemo)(()=>({bill:n,billLoading:t,billError:s,billValidating:a}),[n,s,t,a])}async function d(e){let{data:n}=await l.ZP.post(o,e);return n}async function h(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},73318:function(e,n,t){"use strict";t.d(n,{Py:function(){return a},k4:function(){return c},yr:function(){return d}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.category.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({categories:e||[],categoriesLoading:n,categoriesError:t,categoriesValidating:a,categoriesEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.categories,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},29417:function(e,n,t){"use strict";t.d(n,{qy:function(){return a},uG:function(){return d},wK:function(){return c}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.customer.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({customers:e||[],customersLoading:n,customersError:t,customersValidating:a,customersEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.customers,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},41818:function(e,n,t){"use strict";t.d(n,{iu:function(){return a},nM:function(){return d},ry:function(){return c}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.product.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({products:e||[],productsLoading:n,productsError:t,productsValidating:a,productsEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.products,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},13379:function(e,n,t){"use strict";t.d(n,{D0:function(){return a},R$:function(){return d},dB:function(){return c}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.room.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({rooms:e||[],roomsLoading:n,roomsError:t,roomsValidating:a,roomsEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.rooms,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},63477:function(e,n,t){"use strict";t.d(n,{$:function(){return c},Mz:function(){return a},wX:function(){return d}});var i=t(42333),r=t(2265),l=t(92580);let o=l.Hv.voucher.root,s={revalidateIfStale:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0};function a(){let{data:e,isLoading:n,error:t,isValidating:a}=(0,i.ZP)(o,l._i,s);return(0,r.useMemo)(()=>({vouchers:e||[],vouchersLoading:n,vouchersError:t,vouchersValidating:a,vouchersEmpty:!n&&!(null==e?void 0:e.length)}),[null==e?void 0:e.vouchers,t,n,a])}async function c(e){let{data:n}=await l.ZP.post(o,e);return n}async function d(e,n){let{data:t}=await l.ZP.patch("".concat(o,"/").concat(e),n);return t}},64060:function(e,n,t){"use strict";t.d(n,{Z:function(){return d},S:function(){return u}});var i=t(57437),r=t(60443),l=t(59500),o=t(35843),s=t(89975),a=t(69112);let c=(0,o.ZP)("span")(e=>{let{arrow:n,theme:t}=e,i={top:-6.5,transform:"rotate(135deg)"},r={bottom:-6.5,transform:"rotate(-45deg)"},l={left:-6.5,transform:"rotate(45deg)"},o={right:-6.5,transform:"rotate(-135deg)"};return{width:14,height:14,position:"absolute",borderBottomLeftRadius:3.5,clipPath:"polygon(0% 0%, 100% 100%, 0% 100%)",border:"solid 1px ".concat((0,s.Fq)("light"===t.palette.mode?t.palette.grey[500]:t.palette.common.black,.12)),...(0,a.Ls)({color:t.palette.background.paper}),..."top-left"===n&&{...i,left:20},..."top-center"===n&&{...i,left:0,right:0,margin:"auto"},..."top-right"===n&&{...i,right:20},..."bottom-left"===n&&{...r,left:20},..."bottom-center"===n&&{...r,left:0,right:0,margin:"auto"},..."bottom-right"===n&&{...r,right:20},..."left-top"===n&&{...l,top:20},..."left-center"===n&&{...l,top:0,bottom:0,margin:"auto"},..."left-bottom"===n&&{...l,bottom:20},..."right-top"===n&&{...o,top:20},..."right-center"===n&&{...o,top:0,bottom:0,margin:"auto"},..."right-bottom"===n&&{...o,bottom:20}}});function d(e){let{open:n,children:t,arrow:o="top-right",hiddenArrow:s,sx:a,...d}=e,{style:h,anchorOrigin:u,transformOrigin:x}=function(e){let n;switch(e){case"top-left":n={style:{ml:-.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"top-center":n={style:{},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}};break;case"top-right":default:n={style:{ml:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"bottom-left":n={style:{ml:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"bottom-center":n={style:{},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}};break;case"bottom-right":n={style:{ml:.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}};break;case"left-top":n={style:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}};break;case"left-center":n={anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}};break;case"left-bottom":n={style:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"}};break;case"right-top":n={style:{mt:-.75},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}};break;case"right-center":n={anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"}};break;case"right-bottom":n={style:{mt:.75},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"}}}return n}(o);return(0,i.jsxs)(l.ZP,{open:!!n,anchorEl:n,anchorOrigin:u,transformOrigin:x,slotProps:{paper:{sx:{width:"auto",overflow:"inherit",...h,["& .".concat(r.Z.root)]:{"& svg":{mr:2,flexShrink:0}},...a}}},...d,children:[!s&&(0,i.jsx)(c,{arrow:o}),t]})}var h=t(2265);function u(){let[e,n]=(0,h.useState)(null);return{open:e,onOpen:(0,h.useCallback)(e=>{n(e.currentTarget)},[]),onClose:(0,h.useCallback)(()=>{n(null)},[]),setOpen:n}}},63854:function(e,n,t){"use strict";t.d(n,{F:function(){return l},z:function(){return o}});var i=t(22135),r=t(41101);function l(e,n,t){let l=(0,r.Z)(),o=(0,i.Z)(l.breakpoints.up(n)),s=(0,i.Z)(l.breakpoints.down(n)),a=(0,i.Z)(l.breakpoints.between(n,t)),c=(0,i.Z)(l.breakpoints.only(n));return"up"===e?o:"down"===e?s:"between"===e?a:c}function o(){let e=(0,r.Z)();return[...e.breakpoints.keys].reverse().reduce((n,t)=>{let r=(0,i.Z)(e.breakpoints.up(t));return!n&&r?t:n},null)||"xs"}},48926:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eM}});var i=t(57437),r=t(2265),l=t(15133),o=t(13457),s=t(85884),a=t(9896),c=t(84693);let d=(0,r.createContext)({}),h=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useSaleContext must be use inside SaleProvider");return e},u={products:[],selectedBill:null};function x(e){let{children:n}=e,[t,l]=(0,r.useState)(u),o=(0,r.useCallback)((e,n)=>{l(t=>({...t,[e]:n}))},[l]),s=(0,r.useCallback)(e=>{o("selectedBill",e),o("products",(null==e?void 0:e.products)||[])},[o]),c=(0,r.useCallback)(e=>{var n,i;if(t.products.map(e=>e.product.id).includes(e.id)){let i=t.products.map(n=>n.product.id===e.id?{...n,amount:n.amount+1,note:n.note}:n);o("products",i),(0,a.QD)(null===(n=t.selectedBill)||void 0===n?void 0:n.id,{orders:i.map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})}else o("products",[{product:e,amount:1},...t.products]),(0,a.QD)(null===(i=t.selectedBill)||void 0===i?void 0:i.id,{orders:[{product:e,amount:1,note:""},...t.products].map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})},[t.products,o,a.QD]),h=(0,r.useCallback)(e=>{var n;let i=t.products.filter(n=>n.product.id!==e);o("products",i),(0,a.QD)(null===(n=t.selectedBill)||void 0===n?void 0:n.id,{orders:i.map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})},[t.products,o]),x=(0,r.useCallback)(async(e,n)=>{var i;let r=t.products.map(t=>t.product.id===e?{...t,note:n}:t);o("products",r),(0,a.QD)(null===(i=t.selectedBill)||void 0===i?void 0:i.id,{orders:r.map(e=>({productId:e.product.id,amount:e.amount,note:e.note}))})},[t.products,o]),p=(0,r.useCallback)((e,n)=>{o("products",t.products.map(t=>t.product.id===e?{...t,amount:n}:t))},[t.products,o]),m=(0,r.useMemo)(()=>({...t,setValue:o,onGetBill:s,onAddNote:x,onAddProduct:c,onRemoveProduct:h,onChangeQuantity:p}),[t,o,s,x,c,h,p]);return(0,i.jsx)(d.Provider,{value:m,children:n})}var p=t(44840),m=t.n(p),g=t(3283),j=t(85269),b=t(65128),v=t(27680),Z=t(55963),f=t(25210),y=t(41101),C=t(63854);let w=(0,r.forwardRef)((e,n)=>{let{asLink:t,variant:r="body1",line:l=2,persistent:o=!1,children:s,sx:a,...c}=e,{lineHeight:d}=function(e){let n=(0,y.Z)(),t=(0,C.z)(),i=n.breakpoints.up("xl"===t?"lg":t),r=Math.round(16*parseFloat((("h1"===e||"h2"===e||"h3"===e||"h4"===e||"h5"===e||"h6"===e)&&n.typography[e][i]?n.typography[e][i]:n.typography[e]).fontSize)),l=Number(n.typography[e].lineHeight)*r,{fontWeight:o,letterSpacing:s}=n.typography[e];return{fontSize:r,lineHeight:l,fontWeight:o,letterSpacing:s}}(r),h={overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:l,WebkitBoxOrient:"vertical",...o&&{height:d*l},...a};return t?(0,i.jsx)(f.Z,{color:"inherit",ref:n,variant:r,sx:{...h},...c,children:s}):(0,i.jsx)(j.Z,{ref:n,variant:r,sx:{...h},...c,children:s})});var k=t(7722),z=t(76623),S=t(55594),O=t(64060),T=t(21135),P=t(79245),G=t(46776);let I=(0,r.forwardRef)((e,n)=>{let{children:t,size:r="medium",...l}=e;return(0,i.jsx)(B,{size:r,children:(0,i.jsx)(G.Z,{size:r,ref:n,...l,children:t})})}),_={hover:{scale:1.1},tap:{scale:.95}},R={hover:{scale:1.09},tap:{scale:.97}},F={hover:{scale:1.08},tap:{scale:.99}};function B(e){let{size:n,children:t}=e;return(0,i.jsx)(P.Z,{component:T.m.div,whileTap:"tap",whileHover:"hover",variants:"small"===n&&_||"large"===n&&F||R,sx:{display:"inline-flex"},children:t})}function D(e){let{productId:n,note:t}=e,{onAddNote:l}=h(),s=(0,O.S)(),[a,c]=(0,r.useState)(t),d=(0,r.useCallback)(()=>{l(n,a),s.onClose()},[l,a,s]),u=(0,r.useCallback)(()=>{l(n,""),c(""),s.onClose()},[l,c,a,s]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{color:"primary",onClick:s.onOpen,children:(0,i.jsx)(v.Z,{icon:"material-symbols:note-alt"})}),(0,i.jsx)(O.Z,{open:s.open,onClose:s.onClose,children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(S.Z,{multiline:!0,rows:4,placeholder:"Ghi ch\xfa về sản phẩm n\xe0y...",value:a,onChange:e=>c(e.target.value)}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(z.Z,{size:"small",color:"error",onClick:u,disabled:!a,children:"Xo\xe1 ghi ch\xfa"}),(0,i.jsx)(z.Z,{size:"small",variant:"contained",color:"primary",onClick:d,disabled:!a,children:"Th\xeam mới"})]})]})})]})}var N=t(97292);function H(){let e=(0,O.S)(),{selectedBill:n}=h(),[t,l]=(0,r.useState)("");(0,r.useEffect)(()=>{l(null==n?void 0:n.note)},[n]);let s=(0,r.useCallback)(()=>{l(""),e.onClose()},[l,e]),c=(0,r.useCallback)(()=>{e.onClose(),(0,a.QD)(null==n?void 0:n.id,{note:t})},[l,e,a.QD,n]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{onClick:e.onOpen,disabled:!n,children:(0,i.jsx)(N.Z,{variant:"dot",color:"error",invisible:!t,children:(0,i.jsx)(v.Z,{icon:"material-symbols:note-alt"})})}),(0,i.jsx)(O.Z,{open:e.open,onClose:e.onClose,arrow:"bottom-right",children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(S.Z,{multiline:!0,rows:6,size:"small",placeholder:"Ghi ch\xfa về đơn h\xe0ng...",value:t,onChange:e=>l(e.target.value)}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(z.Z,{size:"small",color:"error",onClick:s,disabled:!t,children:"Xo\xe1 ghi ch\xfa"}),(0,i.jsx)(z.Z,{size:"small",variant:"contained",color:"primary",onClick:c,disabled:!t,children:"X\xe1c nhận"})]})]})})]})}var E=t(55303),Q=t(19045),V=t(70812),L=t(81679),M=t(63477);function q(e){let{discountPrice:n,customerSelected:t,setDiscountPrice:l}=e,s=(0,O.S)(),{vouchers:c}=(0,M.Mz)(),[d,u]=(0,r.useState)("1"),{products:x,selectedBill:p}=h(),g=m()(x,e=>e.amount*(e.product.price-e.product.discount)),[Z,f]=(0,r.useState)(null),[y,C]=(0,r.useState)(0);(0,r.useEffect)(()=>{f(null==p?void 0:p.voucher),l((null==p?void 0:p.discountPrice)||0)},[p]);let w=(0,r.useCallback)(()=>{f(null),l(0),s.onClose(),(0,a.QD)(null==p?void 0:p.id,{voucherId:null,discountPrice:0})},[f,s,a.QD,p]),k=(0,r.useCallback)((e,n)=>{e&&(f(e),l((null==e?void 0:e.price)?e.price:e.percent/100*g)),"clear"===n&&(f(null),l(0))},[f,Z,g,l]),T=(0,r.useCallback)(e=>{f(null),l(Number(e.target.value))},[l]),P=(0,r.useCallback)(e=>{C(Number(e.target.value)),l(Number(e.target.value))},[C,l]),G=(0,r.useCallback)(()=>{Z?(0,a.QD)(null==p?void 0:p.id,{voucherId:Z.id,discountPrice:(null==Z?void 0:Z.price)?Z.price:Z.percent/100*g}):(0,a.QD)(null==p?void 0:p.id,{voucherId:null,discountPrice:Number(null==t?void 0:t.point)>0?y:n}),s.onClose()},[Z,a.QD,p,s,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{onClick:s.onOpen,disabled:!p,children:(0,i.jsx)(N.Z,{variant:"dot",color:"error",invisible:n<=0,children:(0,i.jsx)(v.Z,{icon:"mdi:voucher"})})}),(0,i.jsx)(O.Z,{open:s.open,onClose:s.onClose,arrow:"bottom-right",children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(j.Z,{variant:"subtitle2",children:"Th\xf4ng tin giảm gi\xe1"}),(0,i.jsxs)(Q.Z,{value:d,onChange:(e,n)=>{u(n)},variant:"fullWidth",sx:{mb:.5},children:[(0,i.jsx)(E.Z,{label:"M\xe3 giảm gi\xe1",value:"1"}),(0,i.jsx)(E.Z,{label:"Giảm trực tiếp",value:"2"}),(0,i.jsx)(E.Z,{label:"Trừ t\xedch điểm",value:"3"})]}),"1"===d&&(0,i.jsx)(V.Z,{size:"small",options:c,getOptionLabel:e=>e.name,isOptionEqualToValue:(e,n)=>e.id===n.id,renderInput:e=>(0,i.jsx)(S.Z,{...e,size:"small",placeholder:"T\xecm kiếm m\xe3 giảm gi\xe1...",margin:"none"}),value:Z,onChange:(e,n,t)=>k(n,t),renderOption:A}),"2"===d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Z,{variant:"body2",children:"Nhập số tiền giảm trực tiếp:"}),(0,i.jsx)(S.Z,{size:"small",placeholder:"Nhập số tiền giảm trực tiếp...",value:n,type:"number",onChange:e=>T(e),InputProps:{endAdornment:(0,i.jsx)(L.Z,{position:"end",children:(0,i.jsx)(j.Z,{variant:"subtitle2",children:"VNĐ"})})}})]}),"3"===d&&(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(j.Z,{variant:"body2",children:["Kh\xe1ch h\xe0ng : ",(0,i.jsx)("strong",{children:null==t?void 0:t.name})]}),(0,i.jsxs)(j.Z,{variant:"body2",children:["Điểm t\xedch luỹ hiện tại : ",(0,i.jsxs)("strong",{children:[Number(null==t?void 0:t.point)," điểm"]})]})]}):(0,i.jsx)(j.Z,{variant:"subtitle2",children:"Chưa chọn kh\xe1ch h\xe0ng t\xedch điểm !"}),(0,i.jsx)(j.Z,{variant:"body2",children:"Nhập số điểm t\xedch luỹ muốn trừ"}),(0,i.jsx)(S.Z,{disabled:!t,size:"small",placeholder:"Nhập số điểm t\xedch luỹ muốn trừ...",value:y,type:"number",onChange:e=>P(e),InputProps:{endAdornment:(0,i.jsx)(L.Z,{position:"end",children:(0,i.jsxs)(j.Z,{variant:"subtitle2",children:["= ",(0,b.e_)(y)||"0đ"]})})},error:y>Number(null==t?void 0:t.point),helperText:y>Number(null==t?void 0:t.point)?"Số điểm trừ vượt qu\xe1 điểm t\xedch luỹ !!":null})]}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(z.Z,{size:"small",color:"error",onClick:w,disabled:n<=0,children:"Huỷ giảm gi\xe1"}),(0,i.jsx)(z.Z,{size:"small",variant:"contained",color:"primary",disabled:n<=0,onClick:G,children:"\xc1p dụng"})]})]})})]})}let A=(e,n,t)=>{let{selected:r}=t;return(0,i.jsx)(P.Z,{component:"li",...e,children:(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(j.Z,{variant:"subtitle2",color:"textPrimary",children:n.name}),(0,i.jsxs)(j.Z,{variant:"caption",children:["Giảm ",(0,b.e_)(n.price)||"".concat(n.percent,"%")]})]})})},W={name:"",address:"",phone:"",fee:""};function X(e){let{customerSelected:n}=e,t=(0,O.S)(),{selectedBill:l}=h(),[s,c]=(0,r.useState)(W);(0,r.useEffect)(()=>{c({name:(null==l?void 0:l.name)||(null==n?void 0:n.name)||"",address:(null==l?void 0:l.address)||(null==n?void 0:n.address)||"",phone:(null==l?void 0:l.phone)||(null==n?void 0:n.phone)||"",fee:(null==l?void 0:l.fee)||(null==n?void 0:n.fee)||0})},[n]);let d=(0,r.useCallback)((e,n)=>{c({...{...s},[e]:n})},[s,c]),u=(0,r.useCallback)(()=>{c(W),t.onClose()},[c,t]),x=(0,r.useCallback)(()=>{(0,a.QD)(null==l?void 0:l.id,s),t.onClose()},[c,a.QD,l,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{onClick:t.onOpen,disabled:!l,children:(0,i.jsx)(N.Z,{variant:"dot",color:"error",invisible:!s.address,children:(0,i.jsx)(v.Z,{icon:"iconamoon:delivery-fast-fill"})})}),(0,i.jsx)(O.Z,{open:t.open,onClose:t.onClose,arrow:"bottom-right",children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(j.Z,{variant:"subtitle2",children:"Th\xf4ng tin giao h\xe0ng"}),(0,i.jsx)(S.Z,{multiline:!0,rows:3,size:"small",placeholder:"Địa chỉ nơi giao h\xe0ng...",value:s.address,onChange:e=>d("address",e.target.value)}),(0,i.jsx)(S.Z,{size:"small",placeholder:"T\xean người nhận...",value:s.name,onChange:e=>d("name",e.target.value)}),(0,i.jsx)(S.Z,{size:"small",placeholder:"Số điện thoại người nhận...",value:s.phone,onChange:e=>d("phone",e.target.value)}),(0,i.jsx)(S.Z,{size:"small",placeholder:"Ph\xed giao h\xe0ng...",value:s.fee,onChange:e=>d("fee",e.target.value),InputProps:{endAdornment:(0,i.jsx)(L.Z,{position:"end",children:(0,i.jsx)(j.Z,{variant:"body2",children:"VNĐ"})})}}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(z.Z,{size:"small",color:"error",onClick:u,disabled:!s.address,children:"Huỷ giao h\xe0ng"}),(0,i.jsx)(z.Z,{size:"small",variant:"contained",color:"primary",onClick:x,disabled:!s.address,children:"X\xe1c nhận"})]})]})})]})}var K=t(29417);function Y(e){let{customerSelected:n,setCustomerSelected:t}=e,l=(0,O.S)(),{customers:s}=(0,K.qy)(),{products:c,selectedBill:d}=h();(0,r.useEffect)(()=>{t(null==d?void 0:d.customer)},[d]);let u=m()(c,e=>e.amount*(e.product.price-e.product.discount)),x=(0,r.useCallback)(()=>{t(null),l.onClose(),(0,a.QD)(null==d?void 0:d.id,{customerId:null})},[t,l,a.QD,d]),p=(0,r.useCallback)(()=>{l.onClose(),(0,a.QD)(null==d?void 0:d.id,{customerId:null==n?void 0:n.id})},[l,a.QD,d,n]),g=(0,r.useCallback)((e,n)=>{e&&t(e),"clear"===n&&t(null)},[t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{onClick:l.onOpen,disabled:!d,children:(0,i.jsx)(N.Z,{variant:"dot",color:"error",invisible:!n,children:(0,i.jsx)(v.Z,{icon:"raphael:customer"})})}),(0,i.jsx)(O.Z,{open:l.open,onClose:l.onClose,arrow:"bottom-right",children:(0,i.jsxs)(o.Z,{spacing:1,sx:{padding:1,width:420},children:[(0,i.jsx)(V.Z,{size:"small",options:s,getOptionLabel:e=>e.name,isOptionEqualToValue:(e,n)=>e.id===n.id,renderInput:e=>(0,i.jsx)(S.Z,{...e,size:"small",placeholder:"T\xecm kiếm kh\xe1ch h\xe0ng...",margin:"none"}),value:n,onChange:(e,n,t)=>g(n,t),renderOption:$}),(0,i.jsx)(j.Z,{variant:"body2",children:(0,i.jsx)("strong",{children:"Th\xf4ng tin kh\xe1ch h\xe0ng cho ho\xe1 đơn"})}),(0,i.jsxs)(j.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Họ v\xe0 t\xean :"})," ",(null==n?void 0:n.name)||"Chưa c\xf3"]}),(0,i.jsxs)(j.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Số điện thoại :"})," ",(null==n?void 0:n.phone)||"Chưa c\xf3"]}),(0,i.jsxs)(j.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Địa chỉ :"})," ",(null==n?void 0:n.address)||"Chưa c\xf3"]}),(0,i.jsxs)(j.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Tổng điểm t\xedch luỹ :"})," ","".concat((null==n?void 0:n.point)||0," điểm")]}),(0,i.jsxs)(j.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"T\xedch điểm từ đơn h\xe0ng :"})," ","".concat(Math.round(u/100)," điểm")]}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"end",spacing:1,children:[(0,i.jsx)(z.Z,{size:"small",color:"error",onClick:x,disabled:!n,children:"Huỷ kh\xe1ch h\xe0ng"}),(0,i.jsx)(z.Z,{size:"small",variant:"contained",color:"primary",onClick:p,disabled:!n,children:"X\xe1c nhận"})]})]})})]})}let $=(e,n,t)=>{let{selected:r}=t;return(0,i.jsxs)(P.Z,{component:"li",...e,children:[(0,i.jsx)(g.Z,{variant:"square",src:n.name,sx:{borderRadius:.5,mr:1.5}}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(j.Z,{variant:"subtitle2",color:"textPrimary",children:n.name}),(0,i.jsx)(j.Z,{variant:"caption",children:n.phone})]})]})};var J=t(89975);let U=(0,r.forwardRef)((e,n)=>{let{quantity:t,onIncrease:r,onDecrease:l,disabledIncrease:s,disabledDecrease:a,sx:c,...d}=e;return(0,i.jsxs)(o.Z,{ref:n,flexShrink:0,direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:.5,width:88,borderRadius:.5,typography:"subtitle2",border:e=>"solid 1px ".concat((0,J.Fq)(e.palette.grey[500],.2)),...c},...d,children:[(0,i.jsx)(G.Z,{size:"small",onClick:l,disabled:a,sx:{borderRadius:.5},children:(0,i.jsx)(v.Z,{icon:"eva:minus-fill",width:16})}),t,(0,i.jsx)(G.Z,{size:"small",onClick:r,disabled:s,sx:{borderRadius:.5},children:(0,i.jsx)(v.Z,{icon:"mingcute:add-line",width:16})})]})});function ee(){let{products:e,onChangeQuantity:n,onRemoveProduct:t}=h(),[s,a]=(0,r.useState)(0),[c,d]=(0,r.useState)(null);return(0,i.jsxs)(o.Z,{justifyContent:"space-between",children:[(0,i.jsx)(Z.Z,{sx:{height:"calc(100vh - 232px)",backgroundColor:e=>e.palette.grey[100]},children:(0,i.jsx)(o.Z,{component:k.NM,variants:(0,k.pH)().inDown,spacing:1,sx:{padding:1,height:"100%"},children:e.map(e=>{var r;return(0,i.jsxs)(l.Z,{sx:{padding:.75},children:[(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(g.Z,{variant:"square",src:null===(r=e.product)||void 0===r?void 0:r.image,sx:{borderRadius:.5}}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(w,{variant:"body2",line:1,children:e.product.name}),(0,i.jsx)(w,{variant:"caption",line:1,color:e.product.discount>0?"error":"primary",children:"".concat((0,b.e_)(e.product.price-e.product.discount)," x").concat(e.amount," = ").concat((0,b.e_)((e.product.price-e.product.discount)*e.amount))})]})]}),(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(U,{name:"amount",quantity:e.amount,disabledDecrease:e.amount<=1,disabledIncrease:e.amount>=99,onIncrease:()=>n(e.product.id,e.amount+1),onDecrease:()=>n(e.product.id,e.amount-1)}),(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsx)(D,{productId:e.product.id,note:e.note}),(0,i.jsx)(I,{color:"error",onClick:()=>t(e.product.id),children:(0,i.jsx)(v.Z,{icon:"material-symbols:delete"})})]})]})]}),e.note&&(0,i.jsxs)(j.Z,{variant:"caption",fontStyle:"italic",children:[(0,i.jsx)("strong",{children:"Ghi ch\xfa: "})," ",e.note]})]},e.product.id)})})}),(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{padding:1},children:[(0,i.jsxs)(o.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,i.jsxs)(j.Z,{variant:"subtitle2",fontWeight:"bold",children:["Tổng tiền:"," ",(0,b.e_)(m()(e,e=>e.amount*(e.product.price-e.product.discount))-s)||"0đ"]}),s>0&&(0,i.jsxs)(j.Z,{variant:"subtitle2",color:"error",children:["( - ",(0,b.e_)(s||0)," )"]})]}),(0,i.jsxs)(o.Z,{direction:"row",spacing:.5,children:[(0,i.jsx)(X,{customerSelected:c}),(0,i.jsx)(q,{discountPrice:s,setDiscountPrice:a,customerSelected:c}),(0,i.jsx)(H,{}),(0,i.jsx)(Y,{customerSelected:c,setCustomerSelected:d})]})]})]})}var en=t(54986);function et(e){let{tabView:n,setTabView:t}=e;return(0,i.jsxs)(P.Z,{children:[(0,i.jsx)(en.Z,{sx:{borderStyle:"dashed"}}),(0,i.jsxs)(o.Z,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[(0,i.jsx)(P.Z,{sx:{px:2},children:(0,i.jsxs)(Q.Z,{value:n,onChange:(e,n)=>{t(n)},variant:"scrollable",children:[(0,i.jsx)(E.Z,{label:"Ho\xe1 đơn",value:"1",icon:(0,i.jsx)(v.Z,{icon:"solar:bill-list-bold"})}),(0,i.jsx)(E.Z,{label:"Ph\xf2ng / b\xe0n",value:"2",icon:(0,i.jsx)(v.Z,{icon:"material-symbols:meeting-room"})})]})}),(0,i.jsx)(P.Z,{sx:{flexGrow:1}}),(0,i.jsx)(j.Z,{variant:"subtitle2",fontWeight:"bold",sx:{mr:1.5},children:"Bản quyền c\xf4ng ty cổ phần IIT \xa9 2024"})]})]})}function ei(){let e=(0,O.S)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.Z,{size:"large",onClick:e.onOpen,children:(0,i.jsx)(v.Z,{color:"white",icon:"mingcute:print-fill"})}),(0,i.jsx)(O.Z,{hiddenArrow:!0,open:e.open,onClose:e.onClose,sx:{width:280},children:(0,i.jsx)(o.Z,{spacing:1,p:1,children:(0,i.jsxs)(j.Z,{variant:"subtitle2",children:["M\xe1y in kết nối : ",(0,i.jsx)("strong",{children:"Chưa t\xecm thấy"})]})})})]})}var er=t(92580),el=t(41689);function eo(e){let{bills:n}=e,{onGetBill:t}=h(),r=async(e,n)=>{n&&t((await er.ZP.get("bills/".concat(n.id))).data),"clear"===e&&t(null)};return(0,i.jsx)(V.Z,{size:"small",options:n,getOptionLabel:e=>"Ho\xe1 đơn số ".concat(e.id),isOptionEqualToValue:(e,n)=>e.id===n.id,renderInput:e=>(0,i.jsx)(S.Z,{...e,size:"small",placeholder:"T\xecm kiếm ho\xe1 đơn...",margin:"none"}),onChange:(e,n,t)=>r(t,n),renderOption:es,sx:{bgcolor:"background.default",borderRadius:.5,width:{xs:"100%",md:350}}})}let es=(e,n,t)=>{let{selected:r}=t;return(0,i.jsx)(P.Z,{component:"li",...e,children:(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(j.Z,{variant:"subtitle2",color:"textPrimary",children:["Ho\xe1 đơn số ",n.id]}),(0,i.jsx)(j.Z,{variant:"caption",children:(0,el.zM)(n.createdAt)})]})})};var ea=t(8653);function ec(e){let{onAddNewBill:n}=e,{onGetBill:t}=h(),{enqueueSnackbar:l}=(0,ea.Ds)(),s=(0,r.useCallback)(async()=>{try{let e=await (0,a.cd)({statusId:1,regularPrice:0,discountPrice:0,totalPrice:0});n(e),t(e),l("Đ\xe3 th\xeam ho\xe1 đơn mới !")}catch(e){console.log(e),l(e.message||e.message[0]||"Đ\xe3 c\xf3 lỗi xảy ra ! Vui l\xf2ng thử lại !",{variant:"error"})}},[n,t,l]);return(0,i.jsx)(o.Z,{children:(0,i.jsx)(z.Z,{variant:"contained",color:"secondary",onClick:s,children:"Ho\xe1 đơn mới"})})}var ed=t(64494);let eh=[{key:"F2",label:"Th\xeam ho\xe1 đơn mới"},{key:"F4",label:"Thanh to\xe1n ho\xe1 đơn"},{key:"F7",label:"Chế độ xem ho\xe1 đơn"},{key:"F8",label:"Chế độ xem ph\xf2ng b\xe0n"},{key:"F11",label:"To\xe0n m\xe0n h\xecnh"},{key:"ESC",label:"Tho\xe1t to\xe0n m\xe0n h\xecnh"}];function eu(){let e=(0,O.S)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.Z,{size:"large",onClick:e.onOpen,children:(0,i.jsx)(v.Z,{color:"white",icon:"ooui:keyboard"})}),(0,i.jsx)(O.Z,{hiddenArrow:!0,open:e.open,onClose:e.onClose,children:(0,i.jsx)(o.Z,{children:eh.map((e,n)=>(0,i.jsx)(ed.Z,{children:(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",width:250,children:[(0,i.jsxs)(j.Z,{variant:"subtitle2",fontWeight:700,children:[e.key," :"]}),(0,i.jsx)(j.Z,{variant:"subtitle2",color:"text.disabled",children:e.label})]})},n))})})]})}function ex(e){let{billList:n,handleAddNewBill:t}=e;return(0,i.jsxs)(o.Z,{direction:"row",spacing:2,alignItems:"center",sx:{bgcolor:"primary.main",padding:1},children:[(0,i.jsx)(eo,{bills:n}),(0,i.jsx)(ec,{onAddNewBill:t}),(0,i.jsx)(P.Z,{sx:{flexGrow:1}}),(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsx)(ei,{}),(0,i.jsx)(eu,{})]})]})}var ep=t(2589),em=t(27707),eg=t(13379),ej=t(35691),eb=t(61865),ev=t(89701),eZ=t(22079),ef=t(137),ey=t(91797),eC=t(42834),ew=t(26337),ek=t(27558);function ez(e){let{open:n,onClose:t,onAddRoom:l}=e,{enqueueSnackbar:s}=(0,ea.Ds)(),a=ej.Ry().shape({name:ej.Z_().required("Bạn chưa nhập t\xean cho m\xe3 ph\xf2ng b\xe0n !"),isVip:ej.O7().required("Bạn chưa chọn loại ph\xf2ng !")}),c=(0,eb.cI)({resolver:(0,ev.X)(a),defaultValues:{name:"",isVip:!1}}),{reset:d,handleSubmit:h,formState:{isSubmitting:u}}=c,x=h(async e=>{try{let n=await (0,eg.dB)(e);l(n),s("Đ\xe3 th\xeam dữ liệu m\xe3 ph\xf2ng b\xe0n mới !"),d(),p()}catch(e){console.log(e),s(e.message[0]||e.message||"Đ\xe3 c\xf3 lỗi xảy ra !  Vui l\xf2ng thử lại !",{variant:"error"})}}),p=(0,r.useCallback)(()=>{d(),t()},[d,t]);return(0,i.jsx)(eZ.Z,{fullWidth:!0,maxWidth:"sm",open:n,onClose:p,children:(0,i.jsxs)(ek.ZP,{methods:c,onSubmit:x,children:[(0,i.jsx)(ey.Z,{children:"Th\xeam dữ liệu ph\xf2ng b\xe0n mới"}),(0,i.jsx)(ew.Z,{children:(0,i.jsxs)(o.Z,{spacing:2,children:[(0,i.jsx)(ek.jY,{label:"T\xean ph\xf2ng b\xe0n :",required:!0,children:(0,i.jsx)(ek.au,{name:"name",label:"Nhập t\xean ph\xf2ng b\xe0n",placeholder:"B\xe0n số 01..."})}),(0,i.jsx)(ek.jY,{label:"Loại ph\xf2ng :",required:!0,children:(0,i.jsx)(ek._e,{name:"isVip",label:"Ph\xf2ng cao cấp / ph\xf2ng Vip"})})]})}),(0,i.jsxs)(eC.Z,{children:[(0,i.jsx)(z.Z,{variant:"outlined",onClick:p,children:"Huỷ bỏ"}),(0,i.jsx)(ef.Z,{type:"submit",color:"primary",variant:"contained",loading:u,children:"Th\xeam dữ liệu mới"})]})]})})}function eS(e){let{setTabView:n,onAddNewBill:t}=e,{onGetBill:c}=h(),{rooms:d}=(0,eg.D0)(),u=(0,em.k)(),[x,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{p(d)},[d]);let m=(0,r.useCallback)(e=>{p(n=>[...n,e])},[p]),g=(0,r.useCallback)(async e=>{if(null==e?void 0:e.currentBill)c((await er.ZP.get("bills/".concat(null==e?void 0:e.currentBill.id))).data);else{let n=await (0,a.cd)({statusId:1,regularPrice:0,discountPrice:0,totalPrice:0});c(n),(0,a.QD)(n.id,{roomId:e.id}),t(n)}n("1")},[c,a.cd,t,n,a.QD]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.Z,{sx:{p:1,height:"100%"},children:(0,i.jsxs)(s.Z,{container:!0,spacing:2,children:[x.map((e,n)=>(0,i.jsx)(s.Z,{xs:6,md:2,children:(0,i.jsx)(ep.Z,{onClick:()=>g(e),children:(0,i.jsx)(l.Z,{sx:{aspectRatio:"1/1",boxShadow:e=>e.shadows[3]},children:(0,i.jsxs)(o.Z,{justifyContent:"space-between",alignItems:"center",paddingTop:1,height:"100%",width:"100%",children:[(0,i.jsx)(j.Z,{variant:"subtitle2",children:e.name}),(0,i.jsx)(v.Z,{width:56,color:e.isVip?"warning.main":"unset",icon:e.isVip?"tabler:vip":"ic:baseline-table-restaurant"}),(0,i.jsx)(z.Z,{fullWidth:!0,color:e.currentBill?"warning":"primary",variant:"contained",sx:{borderTopLeftRadius:0,borderTopRightRadius:0},children:e.currentBill?"Đang hoạt động":"Gọi m\xf3n"})]})})})},e.id)),(0,i.jsx)(s.Z,{xs:6,md:2,children:(0,i.jsx)(ep.Z,{onClick:u.onTrue,children:(0,i.jsx)(l.Z,{sx:{aspectRatio:"1/1",boxShadow:e=>e.shadows[3]},children:(0,i.jsxs)(o.Z,{justifyContent:"space-between",alignItems:"center",paddingTop:1,height:"100%",width:"100%",children:[(0,i.jsx)(j.Z,{variant:"subtitle2",children:"B\xe0n mới"}),(0,i.jsx)(v.Z,{width:56,icon:"ic:baseline-table-restaurant"}),(0,i.jsx)(z.Z,{fullWidth:!0,color:"secondary",variant:"contained",sx:{borderTopLeftRadius:0,borderTopRightRadius:0},children:"Th\xeam b\xe0n"})]})})})})]})}),(0,i.jsx)(ez,{open:u.value,onClose:u.onFalse,onAddRoom:m})]})}var eO=t(41818),eT=t(73318),eP=t(14340),eG=t(78276);eP.Zx.register({family:"Roboto",fonts:[{src:"/fonts/Roboto-Regular.ttf"},{src:"/fonts/Roboto-Bold.ttf"}]});let eI=eP.mM.create({col4:{width:"25%"},col8:{width:"75%"},col6:{width:"50%"},col12:{width:"100%"},mb4:{marginBottom:4},mb8:{marginBottom:8},mb40:{marginBottom:40},overline:{fontSize:6,marginBottom:8,fontWeight:700,textTransform:"uppercase"},h3:{fontSize:16,fontWeight:700,textTransform:"uppercase"},h4:{fontSize:9,fontWeight:700},body1:{fontSize:6},subtitle2:{fontSize:6,fontWeight:700},alignRight:{textAlign:"right"},alignCenter:{textAlign:"center"},page:{padding:"10px",fontSize:6,lineHeight:1.6,fontFamily:"Roboto",backgroundColor:"#FFFFFF"},footer:{left:0,right:0,bottom:0,padding:24,margin:"auto",borderTopWidth:1,borderStyle:"solid",position:"absolute",borderColor:"#DFE3E8"},gridContainer:{flexDirection:"row",justifyContent:"space-between"},table:{display:"flex",width:"auto"},tableHeader:{},tableBody:{},tableRow:{padding:"8px 0",flexDirection:"row",borderBottomWidth:1,borderStyle:"solid",borderColor:"#DFE3E8"},noBorder:{paddingTop:8,paddingBottom:0,borderBottomWidth:0},tableCell_1:{width:"10%"},tableCell_2:{width:"50%",paddingRight:16},tableCell_3:{width:"20%"},tableCell_5:{width:"50%"}});function e_(e){var n;let{title:t,invoice:r,products:l,open:o,onClose:s}=e,a=m()(l,e=>e.amount*(e.product.price-e.product.discount));return(0,i.jsx)(eZ.Z,{fullScreen:!0,open:o,children:(0,i.jsxs)(P.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(eC.Z,{sx:{zIndex:9,padding:"12px !important",boxShadow:e=>e.customShadows.z8},children:(0,i.jsx)(eG.Z,{title:"Đ\xf3ng",children:(0,i.jsx)(G.Z,{color:"inherit",onClick:s,children:(0,i.jsx)(v.Z,{icon:"eva:close-fill"})})})}),(0,i.jsx)(P.Z,{sx:{flexGrow:1,height:"100%",overflow:"hidden"},children:(0,i.jsx)(eP.Z$,{width:"100%",height:"100%",style:{border:"none"},children:(0,i.jsx)(eP.BB,{children:(0,i.jsxs)(eP.T3,{size:"C8",style:eI.page,children:[(0,i.jsx)(eP.G7,{style:[eI.gridContainer,eI.mb8],children:(0,i.jsxs)(eP.G7,{style:{alignItems:"center",width:"100%",flexDirection:"column"},children:[(0,i.jsx)(eP.xv,{style:eI.h4,children:t}),(0,i.jsxs)(eP.xv,{style:eI.h4,children:["Ho\xe1 đơn số ",null==r?void 0:r.id]}),(0,i.jsx)(eP.xv,{children:"Ng\xe0y: ".concat((0,el.zM)(null==r?void 0:r.createdAt))})]})}),(0,i.jsx)(eP.G7,{style:[eI.gridContainer,eI.mb4],children:(0,i.jsx)(eP.G7,{style:eI.col12,children:(0,i.jsxs)(eP.xv,{style:[eI.overline],children:["Kh\xe1ch h\xe0ng : ",null==r?void 0:null===(n=r.customer)||void 0===n?void 0:n.name]})})}),(0,i.jsx)(eP.xv,{style:[eI.overline,eI.mb4],children:"Chi tiết đơn h\xe0ng"}),(0,i.jsxs)(eP.G7,{style:eI.table,children:[(0,i.jsx)(eP.G7,{style:eI.tableHeader,children:(0,i.jsxs)(eP.G7,{style:eI.tableRow,children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_1,children:(0,i.jsx)(eP.xv,{style:eI.subtitle2,children:"STT"})}),(0,i.jsx)(eP.G7,{style:eI.tableCell_2,children:(0,i.jsx)(eP.xv,{style:eI.subtitle2,children:"T\xean"})}),(0,i.jsx)(eP.G7,{style:eI.tableCell_3,children:(0,i.jsx)(eP.xv,{style:eI.subtitle2,children:"SL"})}),(0,i.jsx)(eP.G7,{style:eI.tableCell_3,children:(0,i.jsx)(eP.xv,{style:eI.subtitle2,children:"Đơn gi\xe1"})})]})}),(0,i.jsxs)(eP.G7,{style:eI.tableBody,children:[null==l?void 0:l.map((e,n)=>(0,i.jsxs)(eP.G7,{style:eI.tableRow,children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_1,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:n+1})}),(0,i.jsx)(eP.G7,{style:eI.tableCell_2,children:(0,i.jsx)(eP.xv,{style:eI.subtitle2,children:e.product.name})}),(0,i.jsx)(eP.G7,{style:eI.tableCell_3,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:e.amount})}),(0,i.jsx)(eP.G7,{style:eI.tableCell_3,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:(0,b.e_)(e.product.price-e.product.discount)})})]},e.id)),(null==r?void 0:r.name)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eP.G7,{style:[eI.tableRow,eI.noBorder],children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_5,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:"Địa chỉ giao h\xe0ng : "})}),(0,i.jsx)(eP.G7,{style:[eI.tableCell_5,eI.alignRight],children:(0,i.jsx)(eP.xv,{style:eI.body1,children:(null==r?void 0:r.address)||"Kh\xf4ng"})})]}),(0,i.jsxs)(eP.G7,{style:[eI.tableRow,eI.noBorder],children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_5,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:"Điện thoại giao h\xe0ng : "})}),(0,i.jsx)(eP.G7,{style:[eI.tableCell_5,eI.alignRight],children:(0,i.jsx)(eP.xv,{style:eI.body1,children:(null==r?void 0:r.phone)||"Kh\xf4ng"})})]}),(0,i.jsxs)(eP.G7,{style:[eI.tableRow,eI.noBorder],children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_5,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:"Người nhận h\xe0ng : "})}),(0,i.jsx)(eP.G7,{style:[eI.tableCell_5,eI.alignRight],children:(0,i.jsx)(eP.xv,{style:eI.body1,children:(null==r?void 0:r.name)||"Kh\xf4ng"})})]}),(0,i.jsxs)(eP.G7,{style:[eI.tableRow,eI.noBorder],children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_5,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:"Ph\xed giao h\xe0ng : "})}),(0,i.jsx)(eP.G7,{style:[eI.tableCell_5,eI.alignRight],children:(0,i.jsx)(eP.xv,{style:eI.body1,children:(0,b.e_)(null==r?void 0:r.fee)||"0đ"})})]})]}),(0,i.jsxs)(eP.G7,{style:[eI.tableRow,eI.noBorder],children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_5,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:"Ghi ch\xfa : "})}),(0,i.jsx)(eP.G7,{style:[eI.tableCell_5,eI.alignRight],children:(0,i.jsx)(eP.xv,{style:eI.body1,children:(null==r?void 0:r.note)||"Kh\xf4ng"})})]}),(0,i.jsxs)(eP.G7,{style:[eI.tableRow,eI.noBorder],children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_5,children:(0,i.jsx)(eP.xv,{style:eI.body1,children:"Giảm gi\xe1 : "})}),(0,i.jsx)(eP.G7,{style:[eI.tableCell_5,eI.alignRight],children:(0,i.jsx)(eP.xv,{style:eI.body1,children:(0,b.e_)((null==r?void 0:r.discountPrice)||"0đ")})})]}),(0,i.jsxs)(eP.G7,{style:[eI.tableRow,eI.noBorder],children:[(0,i.jsx)(eP.G7,{style:eI.tableCell_5,children:(0,i.jsx)(eP.xv,{style:eI.h4,children:"Tổng tiền : "})}),(0,i.jsx)(eP.G7,{style:[eI.tableCell_5,eI.alignRight],children:(0,i.jsx)(eP.xv,{style:eI.h4,children:(0,b.e_)(a-Number(null==r?void 0:r.discountPrice)||"0đ")})})]})]})]})]})})})})]})})}function eR(e){let{bill:n,products:t}=e,r=(0,em.k)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.Z,{variant:"contained",size:"small",color:"warning",onClick:r.onTrue,children:"Tạm t\xednh"}),(0,i.jsx)(e_,{title:"HO\xc1 ĐƠN TẠM T\xcdNH",invoice:n,products:t,open:r.value,onClose:r.onFalse})]})}var eF=t(22734);function eB(e){var n;let{bill:t}=e,{products:l,onGetBill:c}=h(),d=(0,em.k)(),u=(0,em.k)(),x=m()(l,e=>e.amount*(e.product.price-e.product.discount)),p=(0,r.useCallback)(()=>{u.onTrue(),(0,a.QD)(null==t?void 0:t.id,{statusId:2,roomId:null}),(null==t?void 0:t.customer)&&(0,K.uG)(null==t?void 0:t.customer.id,{point:t.customer.point+Math.round(x/100)}),c(null)},[t,x,u,a.QD,K.uG]),g=(0,r.useCallback)(()=>{d.onFalse(),u.onFalse()},[d,u]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.Z,{variant:"contained",size:"small",color:"primary",onClick:d.onTrue,disabled:(null==t?void 0:t.statusId)!==1,children:"Thanh to\xe1n"}),(0,i.jsx)(eF.ZP,{open:d.value,onClose:d.onFalse,anchor:"right",children:(0,i.jsxs)(o.Z,{justifyContent:"space-between",alignItems:"center",spacing:2,sx:{paddingY:2,paddingX:3,height:"100%",width:{xs:320,md:550}},children:[(0,i.jsxs)(s.Z,{container:!0,spacing:1,children:[(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)(j.Z,{variant:"body2",align:"right",children:(0,el.zM)(null==t?void 0:t.createdAt)}),(0,i.jsx)(G.Z,{onClick:d.onFalse,children:(0,i.jsx)(v.Z,{icon:"ep:close-bold"})})]})}),(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsx)(en.Z,{sx:{borderStyle:"dashed"}})}),(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsxs)(j.Z,{variant:"h6",textTransform:"uppercase",textAlign:"center",sx:{py:1},children:["Ho\xe1 đơn số ",null==t?void 0:t.id]})}),(0,i.jsx)(s.Z,{xs:12,children:(0,i.jsxs)(j.Z,{variant:"body2",children:["Kh\xe1ch h\xe0ng : ",(0,i.jsx)("strong",{children:(null==t?void 0:null===(n=t.customer)||void 0===n?void 0:n.name)||"Kh\xe1ch h\xe0ng"})]})}),(0,i.jsxs)(s.Z,{xs:12,children:[(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsx)(j.Z,{variant:"subtitle2",sx:{width:"25%"},children:"T\xean mặt h\xe0ng"}),(0,i.jsx)(j.Z,{variant:"subtitle2",sx:{width:"25%"},children:"Số lượng"}),(0,i.jsx)(j.Z,{variant:"subtitle2",sx:{width:"25%"},children:"Đơn gi\xe1"}),(0,i.jsx)(j.Z,{variant:"subtitle2",sx:{width:"25%"},children:"Th\xe0nh tiền"})]}),(0,i.jsx)(Z.Z,{sx:{height:"calc(100vh - 400px)"},children:l.map((e,n)=>(0,i.jsxs)(s.Z,{xs:12,children:[(0,i.jsxs)(o.Z,{direction:"row",children:[(0,i.jsxs)(w,{variant:"body2",line:1,sx:{width:"25%"},children:[n+1,". ",e.product.name]}),(0,i.jsx)(w,{variant:"body2",line:1,sx:{width:"25%"},children:e.amount}),(0,i.jsx)(w,{variant:"body2",line:1,sx:{width:"25%"},children:(0,b.e_)(e.product.price)}),(0,i.jsx)(w,{variant:"body2",line:1,sx:{width:"25%"},children:(0,b.e_)(Number(e.product.price)*Number(e.amount))})]}),e.note&&(0,i.jsxs)(j.Z,{variant:"caption",children:["Ghi ch\xfa : ",e.note]})]}))})]}),(0,i.jsx)(s.Z,{xs:6}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(en.Z,{sx:{borderStyle:"dashed"}})}),(null==t?void 0:t.note)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{variant:"body2",children:"Ghi ch\xfa đơn h\xe0ng :"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{variant:"body2",align:"right",children:null==t?void 0:t.note})})]}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{variant:"body2",children:"Giảm gi\xe1 :"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{variant:"body2",align:"right",children:(0,b.e_)(Number(null==t?void 0:t.discountPrice))||"0đ"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{variant:"body2",children:"Giao h\xe0ng :"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{variant:"body2",align:"right",children:(0,i.jsx)(j.Z,{children:(0,b.e_)(Number(null==t?void 0:t.fee))||"0đ"})})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{variant:"body2",children:"Tổng tiền:"})}),(0,i.jsx)(s.Z,{xs:6,children:(0,i.jsx)(j.Z,{align:"right",children:(0,i.jsx)(j.Z,{variant:"h6",children:(0,b.e_)(x-Number(null==t?void 0:t.discountPrice))||"0đ"})})})]}),(0,i.jsx)(z.Z,{variant:"contained",color:"primary",size:"large",fullWidth:!0,onClick:p,children:"X\xe1c nhận thanh to\xe1n"})]})}),(0,i.jsx)(e_,{title:"HO\xc1 ĐƠN THANH TO\xc1N",invoice:t,products:l,open:u.value,onClose:g})]})}var eD=t(36953),eN=t(17078);function eH(e){let{bill:n}=e,t=(0,em.k)(),{onGetBill:l}=h(),{enqueueSnackbar:o}=(0,eD.Ds)(),s=(0,r.useCallback)(()=>{(0,a.QD)(null==n?void 0:n.id,{statusId:3}),l(null),t.onFalse(),o("Huỷ đơn h\xe0ng th\xe0nh c\xf4ng !")},[n,t,a.QD,l,o]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.Z,{variant:"contained",size:"small",color:"error",onClick:t.onTrue,disabled:(null==n?void 0:n.statusId)!==2,children:"Huỷ đơn"}),(0,i.jsx)(eN.Q,{open:t.value,onClose:t.onFalse,title:"X\xe1c nhận huỷ đơn h\xe0ng",content:"Bạn c\xf3 chắc muốn huỷ đơn h\xe0ng n\xe0y kh\xf4ng ( đơn h\xe0ng bị huỷ sẽ kh\xf4ng được t\xednh v\xe0o doanh thu ) ?",action:(0,i.jsx)(z.Z,{variant:"contained",color:"error",onClick:s,children:"X\xe1c nhận huỷ"})})]})}function eE(){let{selectedBill:e,products:n}=h(),{bill:t}=(0,a.aV)(null==e?void 0:e.id);return(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",sx:{padding:1},children:[(0,i.jsx)(eH,{bill:t}),(0,i.jsxs)(o.Z,{direction:"row",spacing:.5,children:[(0,i.jsx)(eR,{bill:t,products:n}),(0,i.jsx)(eB,{bill:t})]})]})}function eQ(e){let{products:n}=e,{onAddProduct:t}=h();return(0,i.jsx)(Z.Z,{sx:{maxHeight:"calc(100vh - 280px)"},children:(0,i.jsx)(P.Z,{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(2, 1fr)"},gap:1,children:n.map(e=>(0,i.jsx)(ep.Z,{onClick:()=>t(e),children:(0,i.jsx)(l.Z,{sx:{padding:.75},children:(0,i.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,i.jsx)(g.Z,{variant:"square",src:e.image,sx:{borderRadius:.5}}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(w,{variant:"body2",line:1,children:e.name}),(0,i.jsxs)(o.Z,{direction:"row",spacing:.5,children:[(0,i.jsx)(w,{line:1,color:"primary",variant:"caption",sx:{textDecoration:e.discount>0?"line-through":"unset"},children:(0,b.e_)(e.price)}),e.discount>0&&(0,i.jsx)(w,{line:1,color:"error",variant:"caption",children:(0,b.e_)(e.price-e.discount)})]})]})]})})},e.id))})})}function eV(e){let{categories:n,filterName:t,setFilterName:l,filterCategory:s,setFilterCategory:a}=e,c=(0,O.S)(),d=(0,r.useCallback)(e=>{l(e.target.value)},[l]),h=(0,r.useCallback)(e=>{a(s.includes(e)?s.filter(n=>n!==e):[...s,e])},[s,a]),u=(0,r.useCallback)(()=>{a([])},[s,a]);return(0,i.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",p:1,children:[(0,i.jsx)(S.Z,{size:"small",value:t,onChange:d,placeholder:"T\xecm kiếm sản phẩm...",InputProps:{startAdornment:(0,i.jsx)(L.Z,{position:"start",children:(0,i.jsx)(v.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,i.jsx)(N.Z,{color:"error",variant:"dot",invisible:!s.length,children:(0,i.jsx)(z.Z,{variant:"contained",color:"primary",endIcon:(0,i.jsx)(v.Z,{icon:c.open?"eva:chevron-up-fill":"eva:chevron-down-fill"}),onClick:c.onOpen,children:"Ph\xe2n loại"})}),(0,i.jsx)(O.Z,{hiddenArrow:!0,open:c.open,onClose:c.onClose,sx:{p:1,width:320},children:(0,i.jsxs)(o.Z,{spacing:1,children:[(0,i.jsx)(Z.Z,{sx:{maxHeight:350},children:(0,i.jsx)(P.Z,{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(1, 1fr)"},gap:1,children:n.map(e=>{let n=s.includes(e.name);return(0,i.jsx)(ep.Z,{onClick:()=>h(e.name),sx:{p:1,borderRadius:1,cursor:"pointer",color:"text.secondary",border:e=>"solid 1px ".concat((0,J.Fq)(e.palette.grey[500],.12)),...n&&{color:"text.primary",bgcolor:"action.selected"}},children:(0,i.jsx)(o.Z,{spacing:1,direction:"row",children:(0,i.jsx)(j.Z,{variant:"body2",children:e.name})})},e.id)})})}),(0,i.jsxs)(o.Z,{spacing:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[(0,i.jsx)(z.Z,{variant:"outlined",color:"inherit",onClick:u,children:"L\xe0m mới"}),(0,i.jsx)(z.Z,{variant:"contained",color:"primary",onClick:c.onClose,children:"Lọc dữ liệu"})]})]})})]})}function eL(){let{products:e}=(0,eO.iu)(),{selectedBill:n}=h(),{categories:t}=(0,eT.Py)(),[s,a]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),u=function(e){let{inputData:n,filterName:t,filterCategory:i}=e;return t&&(n=n.filter(e=>{var n;return(null==e?void 0:null===(n=e.name)||void 0===n?void 0:n.toLowerCase().indexOf(t.toLowerCase()))!==-1})),i.length&&(n=n.filter(e=>i.includes(e.category.name))),n}({inputData:e,filterName:s,filterCategory:c});return(0,i.jsxs)(l.Z,{sx:{height:"100%",width:"100%",position:"relative"},children:[!n&&(0,i.jsxs)(o.Z,{spacing:1,alignItems:"center",justifyContent:"center",sx:{position:"absolute",inset:0,zIndex:9999,bgcolor:e=>(0,J.Fq)(e.palette.background.paper,.68)},children:[(0,i.jsx)(v.Z,{width:40,icon:"ic:round-lock"}),(0,i.jsx)(j.Z,{variant:"body2",children:"Bạn chưa chọn ho\xe1 đơn"})]}),(0,i.jsxs)(o.Z,{sx:{height:"100%"},children:[(0,i.jsx)(eV,{categories:t,filterName:s,filterCategory:c,setFilterCategory:d,setFilterName:a}),(0,i.jsx)(eQ,{products:u}),(0,i.jsx)(en.Z,{sx:{borderStyle:"dashed"}}),(0,i.jsx)(eE,{})]})]})}function eM(){let[e,n]=(0,r.useState)("1"),{bills:t}=(0,a.dz)(),[d,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{h(t)},[t]);let u=(0,r.useCallback)(e=>{h(n=>[...n,e])},[h]);return(0,i.jsx)(x,{children:(0,i.jsx)(c.jx,{hasContent:!0,roles:["teacher"],children:(0,i.jsx)(l.Z,{sx:{borderRadius:0,height:"calc(100vh - 56px)"},children:(0,i.jsxs)(o.Z,{height:"100%",justifyContent:"space-between",children:[(0,i.jsx)(ex,{billList:d,handleAddNewBill:u}),"1"===e&&(0,i.jsxs)(s.Z,{container:!0,sx:{p:1,height:"100%"},children:[(0,i.jsx)(s.Z,{xs:12,md:6,children:(0,i.jsx)(ee,{})}),(0,i.jsx)(s.Z,{xs:12,md:6,children:(0,i.jsx)(eL,{})})]}),"2"===e&&(0,i.jsx)(eS,{setTabView:n,onAddNewBill:u}),(0,i.jsx)(et,{tabView:e,setTabView:n})]})})})})}}}]);